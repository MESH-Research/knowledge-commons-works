{"version":3,"file":"index.js","sources":["../dist-src/index.js"],"sourcesContent":["const chalk = require(\"chalk\");\n\nconst fs = require(\"fs\");\n\nconst logSymbols = require(\"log-symbols\");\n\nconst path = require(\"path\");\n\nconst nodeModulesPath = path.resolve(process.cwd(), \"node_modules\");\n\nconst hasPackages = packageNames => {\n  for (const packageName of packageNames) {\n    if (fs.existsSync(path.resolve(nodeModulesPath, packageName))) {\n      return packageName;\n    }\n  }\n\n  return undefined;\n};\n\nconst replaceDoubleSemiColon = input => input.replace(\"utf-8;;base64\", \"utf-8;base64\");\n\nconst fixFiles = (filesToPatch, packageName) => {\n  filesToPatch.forEach(fileToPatchPath => {\n    if (!fs.existsSync(fileToPatchPath)) {\n      console.log(logSymbols.error, chalk.bgRed.bold(`Failed to find \"${path.resolve(process.cwd(), fileToPatchPath)}\", please check your installation of \"${packageName}\"`));\n      return;\n    }\n\n    fs.writeFileSync(fileToPatchPath, replaceDoubleSemiColon(fs.readFileSync(fileToPatchPath, {\n      encoding: \"utf8\"\n    })));\n  });\n  console.log(logSymbols.info, `Patch was successfully applied`);\n};\n\nconst run = async () => {\n  const lessPackage = hasPackages([\"semantic-ui-less\", \"fomantic-ui-less\"]);\n\n  if (lessPackage !== undefined) {\n    console.log(logSymbols.info, `Detected \"${lessPackage}\" package...`);\n    const filesToPatchPath = [path.resolve(nodeModulesPath, lessPackage, \"themes\", \"default\", \"elements\", \"step.overrides\")];\n    fixFiles(filesToPatchPath, lessPackage);\n    return;\n  }\n\n  const cssPackage = hasPackages([\"semantic-ui-css\", \"fomantic-ui-css\"]);\n\n  if (cssPackage !== undefined) {\n    console.log(logSymbols.info, `Detected \"${cssPackage}\" package...`);\n    const filesToPatchPath = [path.resolve(nodeModulesPath, cssPackage, \"semantic.css\"), path.resolve(nodeModulesPath, cssPackage, \"semantic.min.css\"), path.resolve(nodeModulesPath, cssPackage, \"components\", \"step.css\"), path.resolve(nodeModulesPath, cssPackage, \"components\", \"step.min.css\")];\n    fixFiles(filesToPatchPath, cssPackage);\n    return;\n  }\n\n  console.log(logSymbols.info, `No supported packages found`);\n};\n\nmodule.exports = {\n  run\n};"],"names":["chalk","require","fs","logSymbols","path","nodeModulesPath","resolve","process","cwd","hasPackages","packageNames","packageName","existsSync","undefined","replaceDoubleSemiColon","input","replace","fixFiles","filesToPatch","forEach","fileToPatchPath","console","log","error","bgRed","bold","writeFileSync","readFileSync","encoding","info","run","lessPackage","filesToPatchPath","cssPackage","module","exports"],"mappings":";;AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,MAAMC,EAAE,GAAGD,OAAO,CAAC,IAAD,CAAlB;;AAEA,MAAME,UAAU,GAAGF,OAAO,CAAC,aAAD,CAA1B;;AAEA,MAAMG,IAAI,GAAGH,OAAO,CAAC,MAAD,CAApB;;AAEA,MAAMI,eAAe,GAAGD,IAAI,CAACE,OAAL,CAAaC,OAAO,CAACC,GAAR,EAAb,EAA4B,cAA5B,CAAxB;;AAEA,MAAMC,WAAW,GAAGC,YAAY,IAAI;OAC7B,MAAMC,WAAX,IAA0BD,YAA1B,EAAwC;QAClCR,EAAE,CAACU,UAAH,CAAcR,IAAI,CAACE,OAAL,CAAaD,eAAb,EAA8BM,WAA9B,CAAd,CAAJ,EAA+D;aACtDA,WAAP;;;;SAIGE,SAAP;CAPF;;AAUA,MAAMC,sBAAsB,GAAGC,KAAK,IAAIA,KAAK,CAACC,OAAN,CAAc,eAAd,EAA+B,cAA/B,CAAxC;;AAEA,MAAMC,QAAQ,GAAG,CAACC,YAAD,EAAeP,WAAf,KAA+B;EAC9CO,YAAY,CAACC,OAAb,CAAqBC,eAAe,IAAI;QAClC,CAAClB,EAAE,CAACU,UAAH,CAAcQ,eAAd,CAAL,EAAqC;MACnCC,OAAO,CAACC,GAAR,CAAYnB,UAAU,CAACoB,KAAvB,EAA8BvB,KAAK,CAACwB,KAAN,CAAYC,IAAZ,CAAkB,mBAAkBrB,IAAI,CAACE,OAAL,CAAaC,OAAO,CAACC,GAAR,EAAb,EAA4BY,eAA5B,CAA6C,yCAAwCT,WAAY,GAArI,CAA9B;;;;IAIFT,EAAE,CAACwB,aAAH,CAAiBN,eAAjB,EAAkCN,sBAAsB,CAACZ,EAAE,CAACyB,YAAH,CAAgBP,eAAhB,EAAiC;MACxFQ,QAAQ,EAAE;KAD6C,CAAD,CAAxD;GANF;EAUAP,OAAO,CAACC,GAAR,CAAYnB,UAAU,CAAC0B,IAAvB,EAA8B,gCAA9B;CAXF;;AAcA,MAAMC,GAAG,GAAG,YAAY;QAChBC,WAAW,GAAGtB,WAAW,CAAC,CAAC,kBAAD,EAAqB,kBAArB,CAAD,CAA/B;;MAEIsB,WAAW,KAAKlB,SAApB,EAA+B;IAC7BQ,OAAO,CAACC,GAAR,CAAYnB,UAAU,CAAC0B,IAAvB,EAA8B,aAAYE,WAAY,cAAtD;UACMC,gBAAgB,GAAG,CAAC5B,IAAI,CAACE,OAAL,CAAaD,eAAb,EAA8B0B,WAA9B,EAA2C,QAA3C,EAAqD,SAArD,EAAgE,UAAhE,EAA4E,gBAA5E,CAAD,CAAzB;IACAd,QAAQ,CAACe,gBAAD,EAAmBD,WAAnB,CAAR;;;;QAIIE,UAAU,GAAGxB,WAAW,CAAC,CAAC,iBAAD,EAAoB,iBAApB,CAAD,CAA9B;;MAEIwB,UAAU,KAAKpB,SAAnB,EAA8B;IAC5BQ,OAAO,CAACC,GAAR,CAAYnB,UAAU,CAAC0B,IAAvB,EAA8B,aAAYI,UAAW,cAArD;UACMD,gBAAgB,GAAG,CAAC5B,IAAI,CAACE,OAAL,CAAaD,eAAb,EAA8B4B,UAA9B,EAA0C,cAA1C,CAAD,EAA4D7B,IAAI,CAACE,OAAL,CAAaD,eAAb,EAA8B4B,UAA9B,EAA0C,kBAA1C,CAA5D,EAA2H7B,IAAI,CAACE,OAAL,CAAaD,eAAb,EAA8B4B,UAA9B,EAA0C,YAA1C,EAAwD,UAAxD,CAA3H,EAAgM7B,IAAI,CAACE,OAAL,CAAaD,eAAb,EAA8B4B,UAA9B,EAA0C,YAA1C,EAAwD,cAAxD,CAAhM,CAAzB;IACAhB,QAAQ,CAACe,gBAAD,EAAmBC,UAAnB,CAAR;;;;EAIFZ,OAAO,CAACC,GAAR,CAAYnB,UAAU,CAAC0B,IAAvB,EAA8B,6BAA9B;CAnBF;;AAsBAK,MAAM,CAACC,OAAP,GAAiB;EACfL;CADF"}