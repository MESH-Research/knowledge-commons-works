<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Customizations to InvenioRDM" href="../customizations.html" /><link rel="prev" title="API" href="api.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.07.19 -->
        <title>CLI Commands - Knowledge Commons Works 0.5.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=acfd86a5" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=25af2a20" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Knowledge Commons Works 0.5.3 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <span class="sidebar-brand-text">Knowledge Commons Works 0.5.3 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../README.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feature_highlights.html">Feature Highlights</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Development Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../known_issues.html">Known Issues</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../admin_guide/index.html">Administrator Guide</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Administrator Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../admin_guide/moderation.html">Content Moderation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../setup/index.html">Setting up KCWorks</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Setting up KCWorks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../setup/configuration.html">Configuration of KCWorks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup/installation.html">Installation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developing/index.html">Developing KCWorks</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Developing KCWorks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../developing/architecture.html">KCWorks Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/code_standards.html">Development Standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/source_control.html">Source Control and Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/workflow.html">Development Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/testing.html">Automated Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/how_tos.html">How Tos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/building.html">Build Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/stats.html">Stats and Analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/i18n.html">I18n</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/infrastructure.html">KCWorks Infrastructure</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Reference</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="metadata.html">Metadata Schema, Vocabularies, and Identifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">CLI Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../customizations.html">Customizations to InvenioRDM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../in_depth.html">In-depth Installation Instructions (NEEDS UPDATING)</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/reference/cli_commands.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="cli-commands">
<h1>CLI Commands<a class="headerlink" href="#cli-commands" title="Link to this heading">¶</a></h1>
<section id="running-invenio-cli-commands">
<h2>Running Invenio CLI Commands<a class="headerlink" href="#running-invenio-cli-commands" title="Link to this heading">¶</a></h2>
<p>InvenioRDM includes a number of CLI commands that can be run from the command line. These are invoked using the <code class="docutils literal notranslate"><span class="pre">invenio</span></code> command followed by the command name and any arguments. For example, to run the <code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">users</span> <span class="pre">create</span></code> command, you would use the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>invenio<span class="w"> </span>users<span class="w"> </span>create<span class="w"> </span>&lt;email&gt;<span class="w"> </span>--password<span class="w"> </span>&lt;password&gt;
</pre></div>
</div>
<p>For a list of all available CLI commands, run the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>invenio<span class="w"> </span>--help
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">invenio</span></code> command wraps the underlying <code class="docutils literal notranslate"><span class="pre">flask</span></code> CLI command, so any command that can be run with <code class="docutils literal notranslate"><span class="pre">flask</span></code> can also be run with <code class="docutils literal notranslate"><span class="pre">invenio</span></code>.</p>
</section>
<section id="running-cli-commands-in-the-kcworks-container">
<h2>Running CLI Commands in the KCWorks Container<a class="headerlink" href="#running-cli-commands-in-the-kcworks-container" title="Link to this heading">¶</a></h2>
<p>Since the main KCWorks processes are run in docker containers, you will need to run the CLI commands inside the ui container (not the worker or api containers).</p>
<p>To run a CLI command in the KCWorks container during local development, you can use the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>kcworks-ui<span class="w"> </span>bash
invenio<span class="w"> </span>&lt;command&gt;<span class="w"> </span>&lt;arguments&gt;
</pre></div>
</div>
<p>On the staging and production instances, the container name is generated dynamically whenever the service is deployed. You can find the correct name by running <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">ui</span></code> command. Then run the CLI command inside that container:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;container-name&gt;<span class="w"> </span>bash
invenio<span class="w"> </span>&lt;command&gt;<span class="w"> </span>&lt;arguments&gt;
</pre></div>
</div>
</section>
<section id="kcworks-custom-cli-commands">
<h2>KCWorks Custom CLI Commands<a class="headerlink" href="#kcworks-custom-cli-commands" title="Link to this heading">¶</a></h2>
<p>KCWorks includes a number of custom CLI commands that are not part of the core InvenioRDM system. Further documentation can be found by running any command with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option.</p>
<section id="invenio-importer">
<h3><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">importer</span></code><a class="headerlink" href="#invenio-importer" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>provided by the <code class="docutils literal notranslate"><span class="pre">invenio-record-importer-kcworks</span></code> package</strong></p></li>
<li><p>bulk imports records into the KCWorks instance.</p></li>
<li><p>this provides the sub-commands:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">importer</span> <span class="pre">serialize</span></code>: serializes records from the legacy CORE database export into a JSON file suitable for import into the KCWorks instance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">importer</span> <span class="pre">load</span></code>: loads serialized records from a JSON file into the KCWorks instance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">importer</span> <span class="pre">read</span></code>: reads records from the data to be imported into the KCWorks instance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">importer</span> <span class="pre">create-user</span></code>: creates a KCWorks user linked to a KC user.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">importer</span> <span class="pre">count-records</span></code>: counts the number of records in the data to be imported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">importer</span> <span class="pre">delete-records</span></code>: deletes records from the KCWorks instance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">importer</span> <span class="pre">create-stats</span></code>: creates usage stats aggregations for the imported records to correspond to the records’ usage before import.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">importer</span> <span class="pre">aggregations</span></code>: aggregates the synthetic usage events for the imported records to produce usage stats for the imported records.</p></li>
</ul>
</li>
</ul>
</section>
<section id="invenio-kcworks-index-destroy">
<h3><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-index</span> <span class="pre">destroy</span></code><a class="headerlink" href="#invenio-kcworks-index-destroy" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>provided by the main KCWorks package</strong> (kcworks/site/cli.py)</p></li>
<li><p>destroys search indices for the KCWorks instance that are <em>not</em> destroyed by the main KCWorks index destroy command. These are primarily the indices for storing usage events and aggregated usage data.</p></li>
<li><p><strong>WARNING:</strong> This data <em>only</em> exists in the OpenSearch indices. It is not backed up by the database and will be lost if the indices are destroyed. Use this command with extreme caution.</p></li>
</ul>
</section>
<section id="invenio-kcworks-records">
<h3><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-records</span></code><a class="headerlink" href="#invenio-kcworks-records" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>provided by the main KCWorks package</strong> (kcworks/site/cli.py and kcworks/services/records/cli.py)</p></li>
</ul>
<section id="invenio-kcworks-records-bulk-update">
<h4><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-records</span> <span class="pre">bulk-update</span></code><a class="headerlink" href="#invenio-kcworks-records-bulk-update" title="Link to this heading">¶</a></h4>
<p>Updates a single metadata field to a single new fixed value for <strong>every</strong> record in a community.</p>
<p>Arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">community_id</span></code>: the ID (the UUID) of the collection to update.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_field</span></code>: the field to update.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new_value</span></code>: the new value to set for the field.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>invenio<span class="w"> </span>kcworks-records<span class="w"> </span>bulk-update<span class="w"> </span><span class="m">1234567890</span><span class="w"> </span>metadata.title<span class="w"> </span><span class="s2">&quot;New Title&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">new_value</span></code> argument may be either a python literal or a plain string. Anything that cannot be parsed as a python literal will be treated as a plain string.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Also note that the <code class="docutils literal notranslate"><span class="pre">community_id</span></code> argument is the ID (the UUID) of the collection, not the collection name or its url slug. If you’re not sure what the collection ID is, you can find it by looking at the api response for the collection.</p>
</div>
</section>
</section>
<section id="invenio-kcworks-users">
<h3><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-users</span></code><a class="headerlink" href="#invenio-kcworks-users" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>provided by the main KCWorks package</strong> (kcworks/site/cli.py and kcworks/services/users/cli.py)</p></li>
</ul>
<section id="invenio-kcworks-users-name-parts">
<h4><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-users</span> <span class="pre">name-parts</span></code><a class="headerlink" href="#invenio-kcworks-users-name-parts" title="Link to this heading">¶</a></h4>
<p>Either reads or updates the dictionary of name parts that KCWorks will use to construct the full name of a user (e.g., first name, last name, middle name, etc.) for display in the UI and in creating record metadata.</p>
<p>Positional arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">user_id</span></code>: the ID of the user to read or update.</p></li>
</ul>
<p>Named arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--given</span></code> (-g): the first or given name of the user.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--family</span></code> (-f): the last or family name of the user.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--middle</span></code> (-m): one or more middle names, separated by spaces.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--suffix</span></code> (-s): a suffix that follows the last name (e.g. ‘Jr., III’). This is moved behind the first name when names are listed with the last name first.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--family-prefix</span></code> (-r): a prefix introducing the family name (like ‘von’, etc.) that is not kept in front of the family name for last-name-first display.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--family-prefix-fixed</span></code> (-x): a prefix introducing the family name (like ‘ibn’, ‘van der’, ‘de la’, ‘de’, ‘von’, etc.) that is kept in front of the family name for last-name-first display.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--spousal</span></code> (-u): a spousal family name that is kept in front of the family name for last-name-first display (e.g. ‘Garcia’ + ‘Martinez’ -&gt; ‘Garcia Martinez’).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--parental</span></code> (-p): a parental name, like a patronymic or matronymic, that comes between the first and last names but is not included with the last names for last-name-first display.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--undivided</span></code> (-n): a name string that should not be divided into parts, but should be kept the same in any alphabetical list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--nickname</span></code> (-k): the nickname of the user.</p></li>
</ul>
</section>
<section id="invenio-kcworks-users-read">
<h4><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-users</span> <span class="pre">read</span></code><a class="headerlink" href="#invenio-kcworks-users-read" title="Link to this heading">¶</a></h4>
<p>Reads a KCWorks user’s data from the database, including associated KC account and collection memberships.</p>
<p>Named arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--email</span></code> (-e): the email address of the user to read.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--user-id</span></code> (-u): the ID of the user to read.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--kc-id</span></code> (-k): the username of the KC user to read.</p></li>
</ul>
</section>
<section id="invenio-kcworks-users-groups">
<h4><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-users</span> <span class="pre">groups</span></code><a class="headerlink" href="#invenio-kcworks-users-groups" title="Link to this heading">¶</a></h4>
<p>Lists the groups that a KCWorks user belongs to.</p>
<p>Arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--email</span></code> (-e): the email address of the user to list groups for.</p></li>
</ul>
</section>
<section id="invenio-kcworks-users-group-users">
<h4><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-users</span> <span class="pre">group-users</span></code><a class="headerlink" href="#invenio-kcworks-users-group-users" title="Link to this heading">¶</a></h4>
<p>Lists the users that belong to a KCWorks group (flask-security role).</p>
<p>Arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">group_name</span></code>: the name of the group to list users for.</p></li>
</ul>
</section>
<section id="invenio-kcworks-users-user-groups">
<h4><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-users</span> <span class="pre">user-groups</span></code><a class="headerlink" href="#invenio-kcworks-users-user-groups" title="Link to this heading">¶</a></h4>
<p>Lists the groups (flask-security roles) that a KCWorks user belongs to.</p>
<p>Arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--email</span></code> (-e): the email address of the user to list groups for.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--user-id</span></code> (-u): the ID of the user to list groups for.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--kc-id</span></code> (-k): the username of the KC user to list groups for.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--collection-role</span></code> (-r): the name of the collection role to list groups for.</p></li>
</ul>
</section>
</section>
<section id="invenio-group-collections">
<h3><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">group-collections</span></code><a class="headerlink" href="#invenio-group-collections" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>provided by the main KCWorks package</strong> (kcworks/site/cli.py and kcworks/services/communities/cli.py)</p></li>
</ul>
<section id="invenio-group-collections-check-group-memberships">
<h4><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">group-collections</span> <span class="pre">check-group-memberships</span></code><a class="headerlink" href="#invenio-group-collections-check-group-memberships" title="Link to this heading">¶</a></h4>
<p>Checks and fixes community group memberships for all communities that have group IDs configured.</p>
<p>This command will:</p>
<ol class="arabic simple">
<li><p>Find all communities with group IDs</p></li>
<li><p>Check if the expected group roles exist</p></li>
<li><p>Create missing roles if needed</p></li>
<li><p>Add missing role memberships to communities</p></li>
<li><p>Fix incorrect role permissions</p></li>
<li><p>Report the results</p></li>
</ol>
<p>The command will create three types of roles for each group collection:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{commons_instance}---{group_id}|administrator</span></code> (owner permission)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{commons_instance}---{group_id}|moderator</span></code> (curator permission)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{commons_instance}---{group_id}|member</span></code> (reader permission)</p></li>
</ul>
<p>Example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>invenio<span class="w"> </span>group-collections<span class="w"> </span>check-group-memberships
</pre></div>
</div>
<p>The command will output a summary showing how many communities were unchanged, fixed, or had errors. If any communities had errors, the command will exit with a non-zero status code.</p>
</section>
</section>
<section id="invenio-user-data-update">
<h3><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">user-data</span> <span class="pre">update</span></code><a class="headerlink" href="#invenio-user-data-update" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>provided by the <code class="docutils literal notranslate"><span class="pre">invenio-remote-user-data-kcworks</span></code> package</strong></p></li>
<li><p>updates a single user’s data from the remote KC user data service.</p></li>
<li><p>with the <code class="docutils literal notranslate"><span class="pre">--groups</span></code> option, updates a group collection’s metadata from the remote KC group data service.</p></li>
</ul>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../customizations.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Customizations to InvenioRDM</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="api.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">API</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Mesh Research
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">CLI Commands</a><ul>
<li><a class="reference internal" href="#running-invenio-cli-commands">Running Invenio CLI Commands</a></li>
<li><a class="reference internal" href="#running-cli-commands-in-the-kcworks-container">Running CLI Commands in the KCWorks Container</a></li>
<li><a class="reference internal" href="#kcworks-custom-cli-commands">KCWorks Custom CLI Commands</a><ul>
<li><a class="reference internal" href="#invenio-importer"><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">importer</span></code></a></li>
<li><a class="reference internal" href="#invenio-kcworks-index-destroy"><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-index</span> <span class="pre">destroy</span></code></a></li>
<li><a class="reference internal" href="#invenio-kcworks-records"><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-records</span></code></a><ul>
<li><a class="reference internal" href="#invenio-kcworks-records-bulk-update"><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-records</span> <span class="pre">bulk-update</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#invenio-kcworks-users"><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-users</span></code></a><ul>
<li><a class="reference internal" href="#invenio-kcworks-users-name-parts"><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-users</span> <span class="pre">name-parts</span></code></a></li>
<li><a class="reference internal" href="#invenio-kcworks-users-read"><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-users</span> <span class="pre">read</span></code></a></li>
<li><a class="reference internal" href="#invenio-kcworks-users-groups"><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-users</span> <span class="pre">groups</span></code></a></li>
<li><a class="reference internal" href="#invenio-kcworks-users-group-users"><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-users</span> <span class="pre">group-users</span></code></a></li>
<li><a class="reference internal" href="#invenio-kcworks-users-user-groups"><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">kcworks-users</span> <span class="pre">user-groups</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#invenio-group-collections"><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">group-collections</span></code></a><ul>
<li><a class="reference internal" href="#invenio-group-collections-check-group-memberships"><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">group-collections</span> <span class="pre">check-group-memberships</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#invenio-user-data-update"><code class="docutils literal notranslate"><span class="pre">invenio</span> <span class="pre">user-data</span> <span class="pre">update</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=2a2fe768"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    </body>
</html>