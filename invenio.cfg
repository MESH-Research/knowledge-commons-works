"""
InvenioRDM settings for Knowledge Commons Works project.

This file was automatically generated by 'invenio-cli init'.

For the full list of settings and their values, see
https://inveniordm.docs.cern.ch/reference/configuration/.
"""

from datetime import datetime, timedelta
import idutils

from invenio_i18n import lazy_gettext as _
from invenio_oauthclient.views.client import auto_redirect_login
from invenio_app_rdm.config import (
    NOTIFICATIONS_BACKENDS,
    NOTIFICATIONS_BUILDERS,
)
from invenio_rdm_records.config import (
    RDM_RECORDS_IDENTIFIERS_SCHEMES,
    RDM_RECORDS_PERSONORG_SCHEMES,
    always_valid,
)
from invenio_rdm_records.contrib.imprint import (
    IMPRINT_CUSTOM_FIELDS,
    # IMPRINT_CUSTOM_FIELDS_UI,
    IMPRINT_NAMESPACE,
)
from invenio_rdm_records.contrib.journal import (
    JOURNAL_CUSTOM_FIELDS,
    JOURNAL_NAMESPACE,
)
from invenio_rdm_records.contrib.thesis import (
    THESIS_CUSTOM_FIELDS,
    THESIS_CUSTOM_FIELDS_UI,
    THESIS_NAMESPACE,
)
from invenio_rdm_records.contrib.meeting import (
    MEETING_CUSTOM_FIELDS,
    # MEETING_CUSTOM_FIELDS_UI,
    MEETING_NAMESPACE,
)
from invenio_rdm_records.contrib.codemeta import (
    CODEMETA_CUSTOM_FIELDS,
    CODEMETA_NAMESPACE,
    # CODEMETA_FACETS,
    # CODEMETA_CUSTOM_FIELDS_UI,
)
from invenio_rdm_records.resources.stats.event_builders import (
    build_record_unique_id,
)
from invenio_rdm_records.services.pids import providers
from invenio_rdm_records.services.stats import (
    permissions_policy_lookup_factory,
)
from invenio_rdm_records.services import facets
from invenio_records_resources.services.custom_fields import TextCF
from invenio_stats.contrib.event_builders import build_file_unique_id
from invenio_stats.processors import EventsIndexer, anonymize_user, flag_robots
from invenio_stats.queries import TermsQuery

from kcworks.api_helpers import (
    format_commons_search_payload,
    format_commons_search_collection_payload,
    record_commons_search_recid,
    record_commons_search_collection_recid,
    record_publish_url_factory,
    choose_record_publish_method,
)

# from invenio_stats.tasks import StatsAggregationTask, StatsEventTask
from kcworks.metadata_fields.kcr_metadata_fields import (
    KCR_CUSTOM_FIELDS,
    KCR_ADMIN_INFO_SECTION_UI,
    KCR_COURSE_SECTION_UI,
    KCR_IMPRINT_SECTION_EXTRAS_UI,
    KCR_MEETING_SECTION_EXTRAS_UI,
    KCR_THESIS_SECTION_EXTRAS_UI,
    KCR_JOURNAL_SECTION_EXTRAS_UI,
    KCR_CONTENT_WARNING_FIELD_UI,
    KCR_PROJECT_SECTION_UI,
    KCR_NAMESPACE,
)
from kcworks.metadata_fields.kcr_volumes_fields import (
    KCR_VOLUMES_FIELDS,
    KCR_VOLUMES_FIELDS_UI,
)
from kcworks.metadata_fields.kcr_media_field import (
    KCR_MEDIA_FIELD,
    KCR_MEDIA_SECTION_UI,
)
from kcworks.metadata_fields.kcr_notes_fields import (
    KCR_NOTES_FIELDS,
    KCR_NOTES_SECTION_UI,
)
from kcworks.metadata_fields.kcr_user_tags_fields import (
    KCR_USER_TAGS_FIELDS,
    KCR_USER_TAGS_SECTION_UI,
)
from kcworks.metadata_fields.hclegacy_metadata_fields import (  # noqa: E501
    HCLEGACY_NAMESPACE,
    HCLEGACY_CUSTOM_FIELDS,
    HCLEGACY_INFO_SECTION_UI,
)
from kcworks.metadata_fields.hclegacy_groups_for_deposit import (  # noqa: E501
    HCLEGACY_GROUPS_FOR_DEPOSIT_FIELD,
)
from kcworks.metadata_fields.kcr_ai_field import (
    KCR_AI_USAGE_FIELDS,
    KCR_AI_USAGE_FIELDS_UI,
)
from kcworks.metadata_fields.imprint_fields import (
    KCR_IMPRINT_CUSTOM_FIELDS_UI,
)
from kcworks.metadata_fields.journal_fields import (
    KCR_JOURNAL_CUSTOM_FIELDS_UI,
)
from kcworks.metadata_fields.meeting_fields import (
    KCR_MEETING_CUSTOM_FIELDS_UI,
)
from kcworks.metadata_fields.codemeta_fields import (
    KCR_CODEMETA_CUSTOM_FIELDS_UI,
)
from kcworks.metadata_fields.kcr_series_field import (
    KCR_SERIES_FIELDS,
    KCR_SERIES_FIELDS_UI,
)
from kcworks.services.accounts.saml import (
    acs_handler_factory,
    knowledgeCommons_account_setup,
    knowledgeCommons_account_info,
    knowledgeCommons_account_get_user,
)
from kcworks.services.notifications.builders import (
    CustomCommunityInvitationAcceptNotificationBuilder,
    CustomCommunityInvitationCancelNotificationBuilder,
    CustomCommunityInvitationDeclineNotificationBuilder,
    CustomCommunityInvitationExpireNotificationBuilder,
    CustomCommunityInvitationSubmittedNotificationBuilder,
    CustomCommunityInclusionAcceptNotificationBuilder,
    CustomCommunityInclusionCancelNotificationBuilder,
    CustomCommunityInclusionDeclineNotificationBuilder,
    CustomCommunityInclusionExpireNotificationBuilder,
    CustomCommunityInclusionSubmittedNotificationBuilder,
    CustomCommentRequestEventCreateNotificationBuilder,
    FirstRecordCreatedNotificationBuilder,
    FirstRecordPublishedNotificationBuilder,
)
from kcworks.services.notifications.backends import (
    EmailNotificationBackend,
    InternalNotificationBackend,
)
from invenio_record_importer_kcworks.services.stats.aggregations import (
    StatAggregatorOverridable,
)
from marshmallow import Schema, fields
import os
from pathlib import Path

SITE_UI_URL = os.getenv("INVENIO_SITE_UI_URL", "https://localhost:5000")
SITE_API_URL = os.getenv("INVENIO_SITE_API_URL", "https://localhost:5000/api")

# def _(x):  # needed to avoid start time failure with lazy strings
#     return x

# Custom fields for deposit metadata

RDM_NAMESPACES = {
    **JOURNAL_NAMESPACE,
    **IMPRINT_NAMESPACE,
    **THESIS_NAMESPACE,
    **MEETING_NAMESPACE,
    **CODEMETA_NAMESPACE,
    **KCR_NAMESPACE,
    **HCLEGACY_NAMESPACE,
}

RDM_CUSTOM_FIELDS = [
    *JOURNAL_CUSTOM_FIELDS,
    *MEETING_CUSTOM_FIELDS,
    *IMPRINT_CUSTOM_FIELDS,
    *THESIS_CUSTOM_FIELDS,
    *CODEMETA_CUSTOM_FIELDS,
    *KCR_CUSTOM_FIELDS,
    *KCR_VOLUMES_FIELDS,
    *KCR_MEDIA_FIELD,
    *KCR_NOTES_FIELDS,
    *KCR_USER_TAGS_FIELDS,
    *HCLEGACY_CUSTOM_FIELDS,
    *HCLEGACY_GROUPS_FOR_DEPOSIT_FIELD,
    *KCR_AI_USAGE_FIELDS,
    *KCR_SERIES_FIELDS,
]

RDM_CUSTOM_FIELDS_UI = [
    THESIS_CUSTOM_FIELDS_UI,
    {
        "section": _("KCR thesis information"),
        "hidden": False,
        "fields": [
            *KCR_THESIS_SECTION_EXTRAS_UI,
        ],
    },
    KCR_JOURNAL_CUSTOM_FIELDS_UI,
    {
        "section": _("KCR journal information"),
        "hidden": False,
        "fields": [
            *KCR_JOURNAL_SECTION_EXTRAS_UI,
        ],
    },
    KCR_IMPRINT_CUSTOM_FIELDS_UI,
    KCR_SERIES_FIELDS_UI,
    {
        "section": _("KCR Book information"),
        "hidden": False,
        "fields": [*KCR_IMPRINT_SECTION_EXTRAS_UI, *KCR_VOLUMES_FIELDS_UI],
    },
    KCR_MEETING_CUSTOM_FIELDS_UI,
    {
        "section": _("KCR Conference information"),
        "fields": [*KCR_MEETING_SECTION_EXTRAS_UI],
    },
    {
        "section": _("Content warning"),
        "fields": [KCR_CONTENT_WARNING_FIELD_UI],
    },
    KCR_ADMIN_INFO_SECTION_UI,
    KCR_MEDIA_SECTION_UI,
    KCR_NOTES_SECTION_UI,
    KCR_PROJECT_SECTION_UI,
    KCR_USER_TAGS_SECTION_UI,
    KCR_CODEMETA_CUSTOM_FIELDS_UI,
    KCR_AI_USAGE_FIELDS_UI,
    HCLEGACY_INFO_SECTION_UI,
    KCR_COURSE_SECTION_UI,
]

THEME_SHOW_FRONTPAGE_INTRO_SECTION = False

THEME_SITENAME = "KCWorks"

THEME_TWITTERHANDLE = ""
"""Twitter handle."""

# Flask-SQLAlchemy
# ================
# See https://flask-sqlalchemy.palletsprojects.com/en/2.x/config/

SQLALCHEMY_DATABASE_URI = os.getenv(
    "INVENIO_SQLALCHEMY_DATABASE_URI",
    "postgresql+psycopg2://kcworks:kcworks@db/kcworks",
)

# Knowledge Commons Links
# ======================
COMMONS_API_REQUEST_PROTOCOL = os.getenv(
    "INVENIO_COMMONS_API_REQUEST_PROTOCOL", "https"
)
KC_WORDPRESS_DOMAIN = os.getenv("INVENIO_KC_WORDPRESS_DOMAIN", "hcommons-dev.org")
KC_HELP_URL = f"https://support.{KC_WORDPRESS_DOMAIN}"
KC_WORKS_HELP_URL = f"{KC_HELP_URL}/kcworks/"
KC_HELP_EMAIL = "hello@hcommons.org"
KC_CONTACT_FORM_URL = f"{KC_HELP_URL}/contact-us/"
KC_FAQ_URL = f"{KC_HELP_URL}/faqs/#kcworks-faq"
KC_PROFILES_URL_BASE = f"https://{KC_WORDPRESS_DOMAIN}/members/"
KC_REGISTER_URL = f"https://{KC_WORDPRESS_DOMAIN}/membership/"

KC_SEARCH_URL_DOCS = os.getenv(
    "INVENIO_KC_SEARCH_URL_DOCS",
    f"{COMMONS_API_REQUEST_PROTOCOL}://search." f"{KC_WORDPRESS_DOMAIN}/v1/documents",
)

FRONTPAGE_GUIDE_LINKS = [
    (
        _("Discover"),
        f"{KC_HELP_URL}/what-is-kcworks/",
        "search",
    ),
    (
        _("Publish"),
        f"{KC_HELP_URL}/how-do-i-upload-to-kcworks/",
        "bullhorn",
    ),
    (
        _("Collect"),
        f"{KC_HELP_URL}/what-is-a-collection/",
        "copy outline",
    ),
    (
        _("Collaborate"),
        f"{KC_HELP_URL}/guides/groups/",
        "group",
    ),
]

# Invenio-S3
# ==========
S3_REGION_NAME = "us-east-1"
S3_ENDPOINT_URL = os.getenv("INVENIO_S3_ENDPOINT_URL", "")
# "hcommons-dev-invenio.s3.amazonaws.com",

RATELIMIT_AUTHENTICATED_USER = "50000 per hour;1000 per minute"
RATELIMIT_GUEST_USER = "10000 per hour;200 per minute"
RATELIMIT_ENABLED = True if os.getenv("INVENIO_RATELIMIT_ENABLED") == "True" else False

MAX_CONTENT_LENGTH = (1024**3) * 500  # 500 GB

# Deposit form file quota
FILES_REST_DEFAULT_QUOTA_SIZE = (1024**3) * 500  # 500 GB
APP_RDM_DEPOSIT_FORM_QUOTA = {
    "maxFiles": 100,
    "maxStorage": (1024**3) * 500,  # 500 GB
}

# Flask
# =====
# See https://flask.palletsprojects.com/en/1.1.x/config/

# Define the value of the cache control header `max-age` returned by the
# server when serving public files. Files will be cached by the browser
# for the provided number of seconds.
# See flask documentation for more information:
# https://flask.palletsprojects.com/en/2.1.x/config/#SEND_FILE_MAX_AGE_DEFAULT
SEND_FILE_MAX_AGE_DEFAULT = 300

# SECURITY WARNING: keep the secret key used in production secret!
# Do not commit it to a source code repository.
# ** Stored in .env **
# SECRET_KEY = "CHANGE_ME"

# Since HAProxy and Nginx route all requests no matter the host header
# provided, the allowed hosts variable is set to localhost. In production it
# should be set to the correct host and it is strongly recommended to only
# route correct hosts to the application.
APP_ALLOWED_HOSTS = os.getenv(
    "KCWORKS_ALLOWED_HOSTS",
    "localhost,127.0.0.1",
    # [
    # "0.0.0.0",
    # "localhost",
    # "127.0.0.1",
    # "10.98.11.159",  # staging
    # "10.98.11.40",  # old?
    # "192.168.0.16",  # Ian's dev machine internal
    # "host.docker.internal",
    # "search-invenio-staging-public-awhkkfpwnonipcmpncr6ywgtii.us-east-1.es.amazonaws.com",
    # "44.213.25.141",  # os at aws
    # "3.220.148.227",  # os at aws
    # "invenio-dev.hcommons-staging.org",
    # "18.210.54.2",  #  SSL load balancer
    # "search-kcworks-prod-search-public-455oceeitszcrekmaadbjgh3gi."
    # "us-east-1.es.amazonaws.com",  # prod
    # "works.hcommons.org"  # prod
    # ],
).split(",")
#

# Invenio-Search
# --------------

SEARCH_DOMAIN = os.getenv("INVENIO_SEARCH_DOMAIN", "search:9200")
# "search-invenio-staging-public-awhkkfpwnonipcmpncr6ywgtii.us-east-1.es.amazonaws.com",
SEARCH_INDEX_PREFIX = "kcworks-"


# SEARCH_HOSTS = [{"host": os.environ["SEARCH_HOST_DOMAIN"], "port": 9200}]

# SEARCH_HOST_DOMAIN = os.environ["SEARCH_HOST_DOMAIN"]
# SEARCH_CLIENT_PASSWORD = os.environ["SEARCH_CLIENT_PASSWORD"]
# SEARCH_CLIENT_CONFIG = {
#     "hosts": [{"host": SEARCH_HOST_DOMAIN, "port": 9200}],
#     "http_compress": True,
#     "http_auth": ('kcworks', SEARCH_CLIENT_PASSWORD),
#     "use_ssl": False,
#     "verify_certs": False,
#     "ssl_assert_hostname": False,
#     "ssl_show_warn": False,
# }

# Invenio-App
# ===========
# See https://invenio-app.readthedocs.io/en/latest/configuration.html

# APP_RDM_ROUTES = {
#     "index": "/",
#     "robots": "/robots.txt",
#     "help_search": "/help/search",
#     "help_statistics": "/help/statistics",
#     "record_search": "/search",
#     "record_detail": "/records/<pid_value>",
#     "record_export": "/records/<pid_value>/export/<export_format>",
#     "record_file_preview": "/records/<pid_value>/preview/<path:filename>",
#     "record_file_download": "/records/<pid_value>/files/<path:filename>",
#     "record_from_pid": "/<any({schemes}):pid_scheme>/<path:pid_value>",
#     "record_latest": "/records/<pid_value>/latest",
#     "dashboard_home": "/me",
#     "deposit_create": "/uploads/new",
#     "deposit_edit": "/uploads/<pid_value>",
# }

APP_DEFAULT_SECURE_HEADERS = {
    "content_security_policy": {
        "default-src": [
            "'self'",
            "'unsafe-inline'",  # for inline scripts and styles
            "fonts.googleapis.com",
            "https://khan.github.io/tota11y/dist/tota11y.min.js",
            "blob:",  # for pdf preview
            S3_ENDPOINT_URL.replace("https://", ""),
            SEARCH_DOMAIN.replace("https://", ""),
            KC_WORDPRESS_DOMAIN,
            f"*.{KC_WORDPRESS_DOMAIN}",
            *APP_ALLOWED_HOSTS,
            "https://s3.amazonaws.com/knowledge-commons-works/",
            "https://www.google-analytics.com/g/",
        ],
        "img-src": [
            "'self'",
            "data:",  # for images
            "blob:",
            S3_ENDPOINT_URL.replace("https://", ""),
            SEARCH_DOMAIN.replace("https://", ""),
            KC_WORDPRESS_DOMAIN,
            f"*.{KC_WORDPRESS_DOMAIN}",
            *APP_ALLOWED_HOSTS,
            "https://s3.amazonaws.com/knowledge-commons-works/",
        ],
        "script-src-elem": [
            "'self'",
            KC_WORDPRESS_DOMAIN,
            f"*.{KC_WORDPRESS_DOMAIN}",
            *APP_ALLOWED_HOSTS,
            "www.googletagmanager.com",  # for google analytics tag
            "'unsafe-inline'",  # for inline scripts
        ],
        "font-src": ["'self'", "data:", "fonts.gstatic.com"],  # for fonts
    },
    "content_security_policy_report_only": False,
    "content_security_policy_report_uri": None,
    "force_file_save": False,
    "force_https": False,  # was True by default, but behind load balancer
    "force_https_permanent": False,
    "frame_options": "sameorigin",
    "frame_options_allow_from": None,
    "session_cookie_http_only": True,
    "session_cookie_secure": True,
    # FIXME: change for production? but behind load balancer
    "strict_transport_security": False,  # TODO: was True by default
    "strict_transport_security_include_subdomains": False,  # TODO: was True by default
    # 'strict_transport_security_max_age': 31556926,  # One year in seconds
    # 'strict_transport_security_preload': False,
}


# Flask-Babel
# ===========
# See https://python-babel.github.io/flask-babel/#configuration

# Default locale (language)
BABEL_DEFAULT_LOCALE = "en"
# Default time zone
BABEL_DEFAULT_TIMEZONE = "America/Detroit"


# Invenio-I18N
# ============
# See https://invenio-i18n.readthedocs.io/en/latest/configuration.html

# Other supported languages (do not include BABEL_DEFAULT_LOCALE in list).
I18N_LANGUAGES = [
    # ('de', _('German')),
    # ('tr', _('Turkish')),
]


# Invenio-Theme
# =============
# See https://invenio-theme.readthedocs.io/en/latest/configuration.html

# Google analytics
THEME_TRACKINGCODE_TEMPLATE = "invenio_theme/trackingcode.html"

# Frontpage title
THEME_FRONTPAGE_TITLE = "Knowledge Commons Works"
THEME_FRONTPAGE_SUBTITLE = "discover, publish, collect, collaborate"
THEME_SHORT_TITLE = "KC Works"

# Header logo
THEME_LOGO = "images/kc_works_logos/SVG/KC_Works_logo_Logo.svg"
THEME_HERO_LOGO = "images/kc_works_logos/SVG/kc_works_logo_wordmark.svg"

THEME_SEARCHBAR = False

# Search configuration

RDM_FACETS = {
    "is_published": {
        "facet": facets.is_published,
        "ui": {
            "field": "is_published",
        },
    },
    "resource_type": {
        "facet": facets.resource_type,
        "ui": {
            "field": "resource_type.type",
            "childAgg": {
                "field": "resource_type.subtype",
            },
        },
    },
    "file_type": {
        "facet": facets.filetype,
        "ui": {
            "field": "files.types",
        },
    },
    "language": {
        "facet": facets.language,
        "ui": {
            "field": "languages",
        },
    },
    "access_status": {
        "facet": facets.access_status,
        "ui": {
            "field": "access.status",
        },
    },
    "subject_nested": {
        "facet": facets.subject_nested,
        "ui": {
            "field": "subjects.scheme",
            "childAgg": {
                "field": "subjects.subject",
            },
        },
    },
    "subject": {
        "facet": facets.subject,
        "ui": {
            "field": "subjects.subject",
        },
    },
}

RDM_SORT_OPTIONS = {
    "bestmatch": dict(
        title=_("Best match"),
        fields=["_score"],  # search defaults to desc on `_score` field
    ),
    "newest": dict(
        title=_("Newest"),
        fields=["-created"],
    ),
    "oldest": dict(
        title=_("Oldest"),
        fields=["created"],
    ),
    "published-desc": dict(
        title=_("Most recently published"),
        fields=["-metadata.publication_date"],
    ),
    "published-asc": dict(
        title=_("Earliest published"),
        fields=["metadata.publication_date"],
    ),
    "version": dict(
        title=_("Version"),
        fields=["-versions.index"],
    ),
    "updated-desc": dict(
        title=_("Recently updated"),
        fields=["-updated"],
    ),
    "updated-asc": dict(
        title=_("Least recently updated"),
        fields=["updated"],
    ),
    "mostviewed": dict(
        title=_("Most viewed"), fields=["-stats.all_versions.unique_views"]
    ),
    "mostdownloaded": dict(
        title=_("Most downloaded"), fields=["-stats.all_versions.unique_downloads"]
    ),
}

RDM_SEARCH = {
    "facets": ["resource_type", "language", "file_type", "access_status"],
    "sort": [
        "bestmatch",
        "newest",
        "oldest",
        "published-desc",
        "published-asc",
        "version",
        "mostviewed",
        "mostdownloaded",
    ],
}

RDM_SEARCH_USER_COMMUNITIES = {
    "facets": ["visibility", "type"],
    "sort": ["bestmatch", "newest", "oldest"],
    "sort_default": "bestmatch",
    "sort_default_no_query": "newest",
}
"""User communities search configuration (i.e list of user communities)
This affects the community search modal in the detail page.
"""

COMMUNITIES_SEARCH = {
    "facets": ["type", "visibility"],
    "sort": ["bestmatch", "newest", "oldest"],
    "sort_default": "bestmatch",
    "sort_default_no_query": "newest",
}
"""Community search configuration (i.e list of communities)
This affects the community search modal in the upload form.
"""

# Invenio-App-RDM
# ===============
# See https://invenio-app-rdm.readthedocs.io/en/latest/configuration.html

# Instance's theme entrypoint file. Path relative to the ``assets/`` folder.
INSTANCE_THEME_FILE = "./less/theme.less"
APP_RDM_RECORD_LANDING_PAGE_TEMPLATE = "invenio_modular_detail_page/detail.html"

KC_FOOTER_LINKS = [
    (
        "_blank",
        [
            [_("Help & FAQ"), f"{KC_HELP_URL}"],
            [
                _("Terms of use"),
                f"https://sustaining.{KC_WORDPRESS_DOMAIN}/policies/terms/",
            ],
            [
                _("Privacy policy"),
                f"https://about.{KC_WORDPRESS_DOMAIN}/privacy-statement/",
            ],
            [
                _("Guidelines for use"),
                f"https://{KC_WORDPRESS_DOMAIN}/guidelines/",
            ],
            [_("Mesh Research"), "https://meshresearch.net"],
        ],
        ("eight", "four", "four"),
    ),
    (
        "_blank",
        [
            [_("Knowledge Commons"), f"https://{KC_WORDPRESS_DOMAIN}/"],
            [
                _("LinkedIn"),
                "https://www.linkedin.com/company/knowledge-commons",
                "linkedin",
            ],
            [
                _("hcommons.social"),
                "https://hcommons.social",
                "mastodon",
            ],
            [
                _("Newsletter"),
                (
                    "https://hcommons.us9.list-manage.com/subscribe"
                    "?u=db7b80b27372be53e3cc37dfb&id=ab124b16b0"
                ),
                "bullhorn",
            ],
            [
                _("Supporters"),
                (f"https://about.{KC_WORDPRESS_DOMAIN}/about-us" f"/funding/"),
            ],
        ],
        ("eight", "four", "four"),
    ),
    (
        "_blank",
        [
            [_("Michigan State University"), "https://msu.edu", "MSU.svg"],
            [
                _("National Science Foundation"),
                "https://nsf.gov",
                "USNSF_Logo_Lockup_stacked_RGB_reversed.svg",
            ],
            [
                _("National Endowment for the Humanities"),
                "https://neh.gov",
                "NEH-Preferred-Seal-Transparent.svg",
            ],
        ],
        ("sixteen", "eight", "eight"),
    ),
]

# top-level objects are sections in sidebar
MODULAR_DETAIL_PAGE_SIDEBAR_SECTIONS_RIGHT = [
    {"section": _("Manage")},
    {
        "section": _("Download"),
        "component_name": "SidebarDownloadSection",
        "props": [
            "defaultPreviewFile",
            "downloadFileUrl",
            "files",
            "fileTabIndex",
            "hasFiles",
            "isPreview",
            "permissions",
            "previewFileUrl",
            "record",
            "sectionIndex",
            "setActivePreviewFile",
            "setActiveTab",
            "tabbedSections",
            "totalFileSize",
        ],
        "show": "computer large-monitor widescreen only",
    },
    {
        "section": _("Collections"),
        "component_name": "CommunitiesBanner",
        "props": [
            "additionalCommunities",
            "canManageRecord",
            "community",
            "isPreviewSubmissionRequest",
            "permissions",
            "record",
            "recordCommunityEndpoint",
            "recordCommunitySearchConfig",
            "recordUserCommunitySearchConfig",
            "searchConfig",
            "userCommunitiesMemberships",
        ],
        "show": "computer large-monitor widescreen only",
    },
    {
        "section": _("Content Warning"),
        "component_name": "ContentWarning",
        "props": ["record"],
    },
    {
        "section": _("AI Use"),
        "component_name": "AIUsageAlert",
        "props": ["record"],
    },
    {
        "section": _("Versions"),
        "component_name": "VersionsDropdownSection",
        "props": ["isPreview", "record"],
        "show_heading": False,
    },
    {
        "section": _("Keywords & Subjects"),
        "component_name": "SidebarSubjectsSection",
        "props": ["record"],
        "show": "computer large-monitor widescreen only",
    },
    {
        "section": _("Cite this"),
        "component_name": "CitationSection",
        "props": ["record", "citationStyles", "citationStyleDefault"],
        "show": "computer large-monitor widescreen only",
    },
    {
        "section": _("Details"),
        "component_name": "SidebarDetailsSection",
        "props": [
            "customFieldsUi",
            "doiBadgeUrl",
            "identifierSchemes",
            "landingUrls",
            "record",
        ],
        "subsections": [
            # {"section": "Resource type"},
            {"section": "Published in"},
            {"section": "Imprint"},
            {"section": "Awarding university"},
            {"section": "Conference"},
            {"section": "Conference organization"},
            {"section": "Publisher"},
            {"section": "Publication date"},
            {"section": "Languages"},
            {"section": "Formats"},
            {"section": "Sizes"},
            {"section": "Duration"},
            {"section": "DOI"},
        ],
        "show_heading": False,
        "show": "computer large-monitor widescreen only",
    },
    {
        "section": _("Licenses"),
        "component_name": "SidebarRightsSection",
        "props": ["rights"],
        "show": "tablet computer only",
    },
    {
        "section": _("Export"),
        "component_name": "SidebarExportSection",
        "props": [
            "community",
            "isPreview",
            "recordExporters",
            "record",
        ],
        "show": "computer large-monitor widescreen only",
    },
    {
        "section": _("Share"),
        "component_name": "SidebarSharingSection",
        "props": [
            "community",
            "record",
            "isPreview",
            "isPreviewSubmissionRequest",
        ],
        "show": "computer large-monitor widescreen only",
    },
]
MODULAR_DETAIL_PAGE_SIDEBAR_SECTIONS_LEFT = []

# top-level objects are tabs in main detail page column
MODULAR_DETAIL_PAGE_MAIN_SECTIONS = [
    {
        "section": _("Title"),
        "component_name": "RecordTitle",
        "props": ["title", "isPreviewSubmissionRequest"],
    },
    {
        "section": _("Creators and Contributors"),
        "component_name": "CreatibutorsShortList",
        "props": [
            "creators",
            "contributors",
            "iconsRor",
            "iconsOrcid",
            "iconsGnd",
            "iconsKcUsername",
            "iconsIsni",
            "landingUrls",
            "isPreviewSubmissionRequest",
        ],
    },
    {
        "section": "Tabs",
        "component_name": "DetailMainTabs",
        "subsections": [
            {
                "section": _("Content"),
                "component_name": "DetailMainTab",
                "subsections": [
                    {
                        "section": _("Descriptions"),
                        "component_name": "Descriptions",
                        "props": [
                            "description",
                            "additionalDescriptions",
                            "hasFiles",
                            "permissions",
                        ],
                    },
                    {
                        "section": _("Preview"),
                        "component_name": "FilePreviewWrapper",
                        "props": [
                            "activePreviewFile",
                            "defaultPreviewFile",
                            "files",
                            "isPreview",
                            "hasFiles",
                            "hasPreviewableFiles",
                            "permissions",
                            "previewableExtensions",
                            "previewFile",
                            "previewFileUrl",
                            "record",
                            "setActivePreviewFile",
                            "totalFileSize",
                        ],
                    },
                ],
                "tab": True,
                "props": [],
            },
            {
                "section": _("Details"),
                "component_name": "DetailMainTab",
                "subsections": [
                    {
                        "section": _("Publication"),
                        "component_name": "PublishingDetails",
                        "props": [
                            "customFieldsUi",
                            "doiBadgeUrl",
                            "hasFiles",
                            "iconsKcUsername",
                            "iconsIsni",
                            "iconsGnd",
                            "iconsOrcid",
                            "iconsRor",
                            "identifierSchemes",
                            "landingUrls",
                            "localizedStats",
                            "record",
                            "showDecimalSizes",
                        ],
                        "subsections": [
                            {
                                "section": _("Contributors"),
                                "subsections": [
                                    {"section": "Contributors"},
                                ],
                                "show": "mobile only",
                            },
                            {
                                "section": _("Publication"),
                                "subsections": [
                                    {"section": "URLs"},
                                    {"section": "Version"},
                                    {"section": "Edition"},
                                    {"section": "Additional titles"},
                                    {"section": "Course title"},
                                    {"section": "Chapter label"},
                                    {"section": "Development status"},
                                    {"section": "Source code repository"},
                                    {"section": "Published in"},
                                    {"section": "Imprint"},
                                    {"section": "Publisher"},
                                    {"section": "Degree"},
                                    {"section": "Awarding university"},
                                    {"section": "Department"},
                                    {"section": "Conference"},
                                    {"section": "Conference organization"},
                                    {"section": "Languages"},
                                    {"section": "Publication date"},
                                    {"section": "Additional dates"},
                                    {"section": "Media and materials"},
                                    {"section": "Formats"},
                                    {"section": "Sizes"},
                                    {"section": "Series"},
                                    {"section": "Volumes"},
                                ],
                            },
                            {
                                "section": _("Technical specifications"),
                                "subsections": [
                                    {"section": "Operating systems supported"},
                                    {"section": "Frameworks or runtimes"},
                                    {"section": "Programming languages"},
                                ],
                            },
                            {
                                "section": _("Project details"),
                                "subsections": [
                                    {"section": "Project title"},
                                    {"section": "Project or publication website"},
                                    {"section": "Sponsoring institution"},
                                ],
                            },
                            {
                                "section": _("Additional titles"),
                                "subsections": [
                                    {"section": "Additional titles"},
                                ],
                            },
                            {
                                "section": _("Funding"),
                                "subsections": [{"section": "Funding"}],
                            },
                            {
                                "section": _("Identifiers"),
                                "subsections": [
                                    {"section": "DOI"},
                                    {"section": "Alternate identifiers"},
                                ],
                            },
                            {
                                "section": _("Related"),
                                "subsections": [
                                    {"section": "Related identifiers"},
                                ],
                            },
                            {
                                "section": _("References"),
                                "subsections": [
                                    {"section": "References"},
                                ],
                            },
                            {
                                "section": _("AI Usage"),
                                "subsections": [
                                    {
                                        "section": "kcr:ai_usage",
                                        "subsections": [
                                            {"section": "ai_used"},
                                            {"section": "ai_description"},
                                        ],
                                    }
                                ],
                            },
                            {
                                "section": _("Analytics"),
                                "subsections": [
                                    {
                                        "section": "Analytics",
                                    }
                                ],
                                "show": "mobile only",
                            },
                        ],
                    }
                ],
                "tab": True,
                "props": [],
            },
            {
                "section": _("Contributors"),
                "component_name": "DetailMainTab",
                "subsections": [
                    {
                        "section": "Contributors",
                        "component_name": "Creatibutors",
                        "subsections": [],
                        "props": [
                            "creators",
                            "contributors",
                            "iconsRor",
                            "iconsOrcid",
                            "iconsGnd",
                            "iconsKcUsername",
                            "landingUrls",
                        ],
                    }
                ],
                "tab": True,
                "props": [],
                "show": "tablet computer only",
            },
            {
                "section": _("Analytics"),
                "component_name": "DetailMainTab",
                "subsections": [
                    {
                        "section": "Analytics",
                        "component_name": "Analytics",
                        "props": [
                            "hasFiles",
                            "localizedStats",
                            "showDecimalSizes",
                            "record",
                        ],
                    }
                ],
                "tab": True,
                "props": [],
                "show": "tablet computer only",
            },
            {
                "section": _("Subjects"),
                "component_name": "DetailMainTab",
                "subsections": [
                    {
                        "component_name": "MainSubjectsSection",
                        "props": ["record"],
                    }
                ],
                "tab": True,
                "props": [],
                "show": "mobile tablet only",
            },
            {
                "section": _("Files"),
                "component_name": "DetailMainTab",
                "subsections": [
                    {
                        "section": "FilesPreview",
                        "component_name": "FilePreview",
                        "props": [
                            "activePreviewFile",
                            "files",
                            "isPreview",
                            "hasFiles",
                            "hasPreviewableFiles",
                            "permissions",
                            "previewableExtensions",
                            "previewFile",
                            "previewFileUrl",
                            "record",
                            "setActivePreviewFile",
                            "totalFileSize",
                        ],
                    },
                    {
                        "section": "FilesBox",
                        "component_name": "FileListBox",
                        "props": [
                            "activePreviewFile",
                            "downloadFileUrl",
                            "files",
                            "isPreview",
                            "hasFiles",
                            "permissions",
                            "previewFile",
                            "previewFileUrl",
                            "previewTabIndex",
                            "record",
                            "setActivePreviewFile",
                            "setActiveTab",
                            "showDecimalSizes",
                            "totalFileSize",
                        ],
                    },
                ],
                "tab": True,
                "props": [],
            },
        ],
    },
]


# Invenio-Records-Resources
# =========================
# See https://github.com/inveniosoftware/invenio-records-resources/blob/
# master/invenio_records_resources/config.py

APP_RDM_DEPOSIT_FORM_TEMPLATE = "invenio_modular_deposit_form/deposit.html"

APP_RDM_DEPOSIT_FORM_DEFAULTS = {
    "publication_date": lambda: datetime.now().strftime("%Y-%m-%d"),
    # "rights": [
    #     {
    #         "id": "cc-by-4.0",
    #         "title": "Creative Commons Attribution 4.0 International",
    #         "description": ("The Creative Commons Attribution license "
    #                         " allows "
    #                         "re-distribution and re-use of a licensed work "
    #                         "on the condition that the creator is "
    #                         "appropriately credited."),
    #         "link": "https://creativecommons.org/licenses/by/4.0/legalcode",
    #     }
    # ],
    "resource_type": {"id": "textDocument-journalArticle"},
    "related_identifiers": [],
}

APP_RDM_DEPOSIT_FORM_AUTOCOMPLETE_NAMES = "off"  # "search", "search_only" or "off"


# Invenio-RDM-Records
# ===================
# See https://inveniordm.docs.cern.ch/customize/dois/
DATACITE_ENABLED = True
DATACITE_PREFIX = "10.17613"
DATACITE_TEST_MODE = (
    False if os.getenv("INVENIO_DATACITE_TEST_MODE") == "False" else True
)
DATACITE_DATACENTER_SYMBOL = "MSU.CORE"


# RDM_RECORDS_RESTRICTION_GRACE_PERIOD = timedelta(days=30)
# """Grace period for changing record access to restricted."""

RDM_RECORDS_ALLOW_RESTRICTION_AFTER_GRACE_PERIOD = True
"""Whether record access restriction is allowed after the grace period or not."""

# Persistent identifiers configuration
#
RDM_PERSISTENT_IDENTIFIER_PROVIDERS = [
    # DataCite DOI provider
    providers.DataCitePIDProvider(
        "datacite",
        client=providers.DataCiteClient("datacite", config_prefix="DATACITE"),
        label=_("DOI"),
    ),
    # DOI provider for externally managed DOIs
    providers.ExternalPIDProvider(
        "external",
        "doi",
        validators=[providers.BlockedPrefixes(config_names=["DATACITE_PREFIX"])],
        label=_("DOI"),
    ),
    # OAI identifier
    providers.OAIPIDProvider(
        "oai",
        label=_("OAI ID"),
    ),
]

# TODO: Remove this and next config value when the updated default
#       implementation is merged in Invenio-RDM-Records
RDM_PERSISTENT_IDENTIFIERS = {
    # DOI automatically removed if DATACITE_ENABLED is False.
    "doi": {
        "providers": ["datacite", "external"],
        "required": True,
        "label": _("DOI"),
        "validator": idutils.is_doi,
        "normalizer": idutils.normalize_doi,
        "is_enabled": providers.DataCitePIDProvider.is_enabled,
    },
    "oai": {
        "providers": ["oai"],
        "required": True,
        "label": _("OAI"),
        "is_enabled": providers.OAIPIDProvider.is_enabled,
    },
}
"""The configured persistent identifiers for records.
"""

RDM_PARENT_PERSISTENT_IDENTIFIERS = {
    "doi": {
        "providers": ["datacite"],
        "required": True,
        "condition": lambda rec: rec.pids.get("doi", {}).get("provider") == "datacite",
        "label": _("Concept DOI"),
        "validator": idutils.is_doi,
        "normalizer": idutils.normalize_doi,
        "is_enabled": providers.DataCitePIDProvider.is_enabled,
    },
}
"""Persistent identifiers for parent record."""


RDM_RECORDS_IDENTIFIERS_SCHEMES.update(
    {
        "hclegacy-pid": {
            "label": _("Humanities Commons Legacy PID"),
            "validator": always_valid,
            "datacite": "Other",
        },
        "hclegacy-record-id": {
            "label": _("Humanities Commons Legacy Record ID"),
            "validator": always_valid,
            "datacite": "Other",
        },
        "datacite-doi": {
            "label": _("DOI (DataCite)"),
            "validator": idutils.is_doi,
            "datacite": "DOI",
        },
        "alternate-doi:": {
            "label": _("Alternate DOI"),
            "validator": idutils.is_doi,
            "datacite": "Other",
        },
        "import-recid": {
            "label": _("Import record ID"),
            "validator": always_valid,
            "datacite": "Other",
        },
        "neh-recid": {
            "label": _("NEH record ID"),
            "validator": always_valid,
            "datacite": "Other",
        },
    }
)

RDM_RECORDS_PERSONORG_SCHEMES.update(
    {
        "hcid": {
            "label": _("hcid"),
            "validator": always_valid,
            "datacite": "Other",
        },
        "kcid": {
            "label": _("kcid"),
            "validator": always_valid,
            "datacite": "Other",
        },
        "hc_username": {
            "label": _("KC member"),
            "validator": always_valid,
            "datacite": "Other",
        },
        "kc_username": {
            "label": _("KC member"),
            "validator": always_valid,
            "datacite": "Other",
        },
        "neh_user_id": {
            "label": _("NEH user ID"),
            "validator": always_valid,
            "datacite": "Other",
        },
        "import_user_id": {
            "label": _("Import user ID"),
            "validator": always_valid,
            "datacite": "Other",
        },
    }
)

VOCABULARIES_IDENTIFIER_SCHEMES = {
    "grid": {"label": _("GRID"), "validator": lambda x: True},
    "gnd": {"label": _("GND"), "validator": idutils.is_gnd},
    "isni": {"label": _("ISNI"), "validator": idutils.is_isni},
    "ror": {"label": _("ROR"), "validator": idutils.is_ror},
}
""""Generic identifier schemes, usable by other vocabularies."""

VOCABULARIES_FUNDER_SCHEMES = {
    **VOCABULARIES_IDENTIFIER_SCHEMES,
    "doi": {"label": _("DOI"), "validator": idutils.is_doi},
    "ofr": {"label": _("Open Funder Registry"), "validator": lambda x: True},
}
"""Funders allowed identifier schemes."""
# FIXME: implement validator for ofr identifiers

# Authentication - Invenio-Accounts and Invenio-OAuthclient
# =========================================================
# See: https://inveniordm.docs.cern.ch/customize/authentication/

# Email settings
# --------------

MAIL_SERVER = "smtp.sparkpostmail.com"
MAIL_PORT = 587
MAIL_USE_TLS = True
MAIL_USE_SSL = False
MAIL_USERNAME = os.getenv("SPARKPOST_USERNAME")
MAIL_PASSWORD = os.getenv("SPARKPOST_API_KEY")
MAIL_DEFAULT_SENDER = os.getenv("INVENIO_ADMIN_EMAIL")
# MAIL_MAX_EMAILS = None
# MAIL_ASCII_ATTACHMENTS: bool = False

MAIL_SUPPRESS_SEND = (
    True if os.getenv("INVENIO_MAIL_SUPPRESS_SEND") == "True" else False
)  # to disable all email sending
RECORD_IMPORTER_ADMIN_EMAIL = os.getenv("INVENIO_ADMIN_EMAIL")  # default owner account
APP_RDM_ADMIN_EMAIL_RECIPIENT = os.getenv("INVENIO_ADMIN_EMAIL")
GROUP_COLLECTIONS_ADMIN_EMAIL = os.getenv("INVENIO_ADMIN_EMAIL")  # admin owner account
SECURITY_EMAIL_SUBJECT_REGISTER = _("Welcome to KCWorks!")

# Invenio-Notifications
# --------------------
# See https://inveniordm.docs.cern.ch/customize/notifications/

NOTIFICATIONS_MODERATOR_ROLE = "admin-moderator"

NOTIFICATIONS_BACKENDS.update(
    {
        InternalNotificationBackend.id: InternalNotificationBackend(),
        EmailNotificationBackend.id: EmailNotificationBackend(),
    }
)

NOTIFICATIONS_BUILDERS.update(
    {
        FirstRecordCreatedNotificationBuilder.type: (
            FirstRecordCreatedNotificationBuilder
        ),
        FirstRecordPublishedNotificationBuilder.type: (
            FirstRecordPublishedNotificationBuilder
        ),
        CustomCommunityInclusionAcceptNotificationBuilder.type: (
            CustomCommunityInclusionAcceptNotificationBuilder
        ),
        CustomCommunityInclusionCancelNotificationBuilder.type: (
            CustomCommunityInclusionCancelNotificationBuilder
        ),
        CustomCommunityInclusionDeclineNotificationBuilder.type: (
            CustomCommunityInclusionDeclineNotificationBuilder
        ),
        CustomCommunityInclusionExpireNotificationBuilder.type: (
            CustomCommunityInclusionExpireNotificationBuilder
        ),
        CustomCommunityInclusionSubmittedNotificationBuilder.type: (
            CustomCommunityInclusionSubmittedNotificationBuilder
        ),
        CustomCommentRequestEventCreateNotificationBuilder.type: (
            CustomCommentRequestEventCreateNotificationBuilder
        ),
        CustomCommunityInvitationSubmittedNotificationBuilder.type: (
            CustomCommunityInvitationSubmittedNotificationBuilder
        ),
        CustomCommunityInvitationAcceptNotificationBuilder.type: (
            CustomCommunityInvitationAcceptNotificationBuilder
        ),
        CustomCommunityInvitationCancelNotificationBuilder.type: (
            CustomCommunityInvitationCancelNotificationBuilder
        ),
        CustomCommunityInvitationDeclineNotificationBuilder.type: (
            CustomCommunityInvitationDeclineNotificationBuilder
        ),
        CustomCommunityInvitationExpireNotificationBuilder.type: (
            CustomCommunityInvitationExpireNotificationBuilder
        ),
    }
)

# Invenio-Accounts
# ----------------
# See https://github.com/inveniosoftware/invenio-accounts/blob/
# master/invenio_accounts/config.py
ACCOUNTS_LOCAL_LOGIN_ENABLED = True  # enable local login
SECURITY_REGISTERABLE = False  # local login: allow users to register
SECURITY_RECOVERABLE = True  # local login: allow users to reset the password
SECURITY_CHANGEABLE = True  # local login: allow users to change psw
CONFIRMABLE = False  # local login: require users to confirm email
SECURITY_CONFIRMABLE = False  # local login: users can confirm e-mail address
LOGIN_WITHOUT_CONFIRMATION = True
SECURITY_LOGIN_WITHOUT_CONFIRMATION = (
    True  # allow users to login without confirming email
)
PERMANENT_SESSION_LIFETIME = timedelta(days=365)
SECURITY_TRACKABLE = True  # enable tracking of basic user login statistics

ACCOUNTS_DEFAULT_EMAIL_VISIBILITY = "public"
ACCOUNTS_DEFAULT_USER_VISIBILITY = "public"
ACCOUNTS_DEFAULT_USERS_VERIFIED = True

ACCOUNTS_COVER_TEMPLATE = "invenio_theme/base_cover.html"

# Invenio-SAML
# ----------------
# To set up, provide IDP with
# entity id: like https://invenio-dev.hcommons-staging.org/saml/
#                 metadata/knowledgeCommons
# assertion consumer service: like https://localhost/saml/authorized
#                                  /knowledgeCommons
OAUTHCLIENT_LOGIN_USER_TEMPLATE = "invenio_saml/login_user.html"

# Base URL for the extensions endpoint.
SSO_SAML_DEFAULT_BLUEPRINT_PREFIX = "/saml"

# URL route for the metadata request.
SSO_SAML_DEFAULT_METADATA_ROUTE = "/metadata/<idp>"

# URL route for the SP login.
SSO_SAML_DEFAULT_SSO_ROUTE = "/login/<idp>"

# URL route to handle the IdP login request.
SSO_SAML_DEFAULT_ACS_ROUTE = "/authorized/<idp>"

# URL route for the SP logout.
SSO_SAML_DEFAULT_SLO_ROUTE = "/slo/<idp>"

# URL route to handle the IdP logout request.
SSO_SAML_DEFAULT_SLS_ROUTE = "/sls/<idp>"

SSO_SAML_IDPS = {
    "knowledgeCommons": {
        "title": "Knowledge Commons",
        "description": "Knowledge Commons Authentication Service",
        # "icon": "",
        "sp_cert_file": "/opt/invenio/var/instance/saml_cert.crt",
        "sp_key_file": "/opt/invenio/var/instance/saml_private_key.key",
        "settings": {
            # If strict is True, then the Python Toolkit will reject unsigned
            # or unencrypted messages if it expects them to be signed
            # or encrypted.
            # Also it will reject the messages if the SAML standard is
            # not strictly
            # followed. Destination, NameId, Conditions ... are validated too.
            "strict": False,
            # Enable debug mode (outputs errors).
            "debug": (
                True
                if os.getenv("INVENIO_SAML_DEBUG_MODE", "True") == "True"
                else False
            ),
            "sp": {
                # NOTE: Assertion consumer service is https://localhost/saml/
                # authorized/knowledgeCommons
                # NOTE: entityId for the dev SP is
                # https://localhost/saml/metadata/knowledgeCommons
                # NOTE: entityId for the staging SP is
                # https://invenio-dev.hcommons-staging.org/saml/idp
                # Specifies the constraints on the name identifier to be used
                # to represent the requested subject.
                # Take a look on https://github.com/onelogin/python-saml/
                # blob/master/src/onelogin/saml2/constants.py
                # to see the NameIdFormat that are supported.
                "NameIDFormat": "urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified",
            },
            # Identity Provider Data that we want connected with our SP.
            "idp": {
                "entityId": f"https://proxy.{KC_WORDPRESS_DOMAIN}/idp",
                # SSO endpoint info of the IdP. (Authentication
                # Request protocol)
                "singleSignOnService": {
                    # URL Target of the IdP where the Authentication
                    # Request Message will be sent.
                    "url": f"https://proxy.{KC_WORDPRESS_DOMAIN}/Saml2/" "sso/redirect",
                    # SAML protocol binding to be used when returning the
                    # <Response> message. OneLogin Toolkit supports
                    # the HTTP-Redirect binding
                    # only for this endpoint.
                    "binding": "urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect",
                },
                "singleLogoutService": {
                    # URL Location where the <LogoutRequest> from the IdP
                    # will be sent (IdP-initiated logout)
                    # FIXME: do we use this?
                    "url": f"{SITE_UI_URL}/saml/slo/knowledgeCommons",
                    # SAML protocol binding to be used when returning
                    # the <Response> message. OneLogin Toolkit supports
                    # the HTTP-Redirect binding
                    # only for this endpoint.
                    "binding": "urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect",
                },
                # Public X.509 certificate of the IdP
                "x509cert": os.getenv("SAML_KC_CERT"),
                # "MIIELTCCApWgAwIBAgIJAPeDxhrttBXNMA0GCSqGSIb3DQEBCwUAMCExHzAdBgNVBAMTFnByb3h5Lmhjb21tb25zLWRldi5vcmcwHhcNMTcxMTAxMTc0NTE3WhcNMjcxMDMwMTc0NTE3WjAhMR8wHQYDVQQDExZwcm94eS5oY29tbW9ucy1kZXYub3JnMIIBojANBgkqhkiG9w0BAQEFAAOCAY8AMIIBigKCAYEA0d6ycqcxviv946IzS7ZobCK0XAsrwHvcKo65hWkOZsxYBTRvjKITSpKv4TGyVG4leI0Ifthz7o3QAA4IKkkgY15kYO5AhJc9pVa+11vG0DM58qO6yraQRM4U/71AgDEmEZXsUblf3TCkN5w351G26jNwgax+aWNuwzX5EDS5farOhruGG2FwVYEOEHOtWSOKBR8duq1O/yY9OKMhIc2kmh9R"  # noqa: E501
                # " m1594qTzZbxNXjyCY+LU/GZbYQP+WlbjM/dHflK5Y2WexyT942xHYnesvPnzGvEMB4g685Yyjl+9xz+AE41sifKYy03m7GgkimXNxQ2SnGZ4Rtj+3DlDC9S/dB2CRJd2uaTwgxEEK/zJJ1K2TFRfDH/wxCW5DwI3n8BMglc8TPZ33FDqNgZPwPDl92/shwNIU3sFM/lmDtLm/4XeKZjOZYa+WCVC71tnFYDltK1//oAqFSVRF0WT6+dcnjXxJSdRrQo+C1gWI+aXJzmDmhp8WBN2q7nUGapJYSu0a5yXAgMBAAGjaDBmMEUGA1UdEQQ+MDyCFnByb3h5Lmhjb21tb25zLWRldi5vcmeGImh0dHBzOi8vcHJveHkuaGNvbW1vbnMtZGV2Lm9yZy9pZHAwHQYDVR0OBBYEFDLkys52MyePCpr5IN2ybhgIosmlMA0GCSqGSIb3DQEBCwUAA4IBgQDOuUnSwfru5uNorAISo5QEVUi3UrholF0RPFFvM6P63MOpWZwdFQYKjY1eaaE+X++AZ1FkHQv/esy7F0FRWiyU3LHUX3Yzuttb7vj7mw5D6IYuSIG1/0Edj/eSpnOs+6MQUUpfaFi+A0C9Smng6L1kj3SOlePprJdwfIdGG/6oiDaF1bhoWs/eidouzMLMKiGY6KzmaT8fInST1BGMdm4+zqNvwd1FuifDOvVQqqtl"  # noqa: E501
                # " q2og0arTXG01YyCvU+NJT/6KjLDZf1bSmDWAPQ51Fc4fpkeOj+aG0DfwdutO2SNkdDDdD/m7pnepxv2u8jqSKyYKdrzLd0lJPrqH8YV4AYmyJ1UortJXFoTsGSbPv0fw"  # noqa: E501
                # " qM1b1JAKsPMP22xmp2i4BcYOT1jZ+R+RXmMNK+fUSXAmSkhk/8h6CMgmU4ldBj5jtyn/M4GrGesMU1sIgidoCj/5F3jQlswz0eoaX3LyWQkDZbUbIm6Vz4h3GFwwlky8c5RbLEmwlolP+zSzoq4T/tw="  # noqa: E501
            },
            # Security settings
            # more on https://github.com/onelogin/python-saml
            "security": {
                "authnRequestsSigned": False,
                "failOnAuthnContextMismatch": False,
                "logoutRequestSigned": False,
                "logoutResponseSigned": False,
                "metadataCacheDuration": None,
                "metadataValidUntil": None,
                "nameIdEncrypted": False,
                "requestedAuthnContext": False,
                "requestedAuthnContextComparison": "exact",
                "signMetadata": False,
                "signatureAlgorithm": (
                    "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"
                ),
                "wantAssertionsEncrypted": False,
                "wantAssertionsSigned": False,
                "wantAttributeStatement": False,
                "wantMessagesSigned": False,
                "wantNameId": True,
                "wantNameIdEncrypted": False,
                "digestAlgorithm": "http://www.w3.org/2001/04/xmlenc#sha256",
            },
        },
        # Account Mapping
        "mappings": {
            "email": "urn:oid:0.9.2342.19200300.100.1.3",  # "mail"
            # "name": "urn:oid:2.5.4.3",  # "cn"
            "name": "urn:oid:2.5.4.42",  # "givenName"
            "surname": "urn:oid:2.5.4.4",  # "sn"
            "external_id": "urn:oid:2.16.840.1.113730.3.1.3",  # "employeeNumber"
            "title": "urn:oid:2.5.4.12",  # "Hc Developer"
            "isMemberOf": "urn:oid:1.3.6.1.4.1.5923.1.5.1.1",
            #   ['CO:COU:HC:members:active']
        },
        # Note: keep in mind the string should match
        # given name for authentication provider
        "acs_handler": acs_handler_factory(
            "knowledgeCommons",
            account_info=knowledgeCommons_account_info,
            account_setup=knowledgeCommons_account_setup,
            user_lookup=knowledgeCommons_account_get_user,
        ),
        # Automatically set `confirmed_at` for users upon
        # registration, when using the default `acs_handler`
        "auto_confirm": True,
    }
}

# Invenio-OAuthclient
# -------------------
# See https://github.com/inveniosoftware/invenio-oauthclient/blob/
# master/invenio_oauthclient/config.py

OAUTHCLIENT_REMOTE_APPS = {}  # configure external login providers

ACCOUNTS_LOGIN_VIEW_FUNCTION = (
    auto_redirect_login  # autoredirect to external login if enabled
)
OAUTHCLIENT_AUTO_REDIRECT_TO_EXTERNAL_LOGIN = False  # autoredirect to external login

# Invenio-UserProfiles
# --------------------
USERPROFILES_READ_ONLY = (
    False  # allow users to change profile info (name, email, etc...)
)

# OAI-PMH
# =======
# See https://github.com/inveniosoftware/invenio-oaiserver/blob/
# master/invenio_oaiserver/config.py

OAISERVER_ID_PREFIX = SITE_UI_URL
"""The prefix that will be applied to the generated OAI-PMH ids."""


# Identifier urls
# pid follows end of each string
# urn expects to begin 'urn:nbn'
LANDING_URLS = {
    "ads": "https://ui.adsabs.harvard.edu/#abs/",
    "arrayexpress_array": "https://www.ebi.ac.uk/arrayexpress/arrays/",
    "arrayexpress_experiment": "https://www.ebi.ac.uk/arrayexpress/experiments/",
    "arxiv": "https://arxiv.org/abs/",
    "ascl": "https://ascl.net/",
    "bioproject": "https://www.ebi.ac.uk/ena/data/view/",
    "biosample": "https://www.ebi.ac.uk/ena/data/view/",
    "doi": "https://doi.org/",
    "ensembl": "https://www.ensembl.org/id/",
    "genome": "https://www.ncbi.nlm.nih.gov/assembly/",
    "geo": "https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=",
    "gnd": "https://d-nb.info/gnd/",
    "hal": "https://hal.archives-ouvertes.fr/",
    "handle": "https://hdl.handle.net/",
    "hcommons_username": KC_PROFILES_URL_BASE,
    "kcommons_username": KC_PROFILES_URL_BASE,
    "isni": "https://isni.org/isni/",
    "orcid": "https://orcid.org/",
    "pmid": "https://pubmed.ncbi.nlm.nih.gov/",
    "pmcid": "https://www.ncbi.nlm.nih.gov/pmc/",
    "refseq": "https://www.ncbi.nlm.nih.gov/entrez/viewer.fcgi?val=",
    "ror": "https://ror.org/",
    "sra": "https://www.ebi.ac.uk/ena/data/view/",
    "swh": "https://archive.softwareheritage.org/",
    "urn": "https://nbn-resolving.org/",
    "uniprot": "https://purl.uniprot.org/uniprot/",
    "viaf": "https://viaf.org/viaf/",
}
"""URL generation configuration for the supported PID providers."""

# invenio-record-importer-kcworks
# =======================

RECORD_IMPORTER_API_TOKEN = os.getenv("API_TOKEN")
RECORD_IMPORTER_DATA_DIR = Path(
    os.getenv("INVENIO_RECORD_IMPORTER_DATA_DIR", "/opt/invenio/var/import_data")
)
RECORD_IMPORTER_LOGS_LOCATION = Path(
    os.getenv("INVENIO_LOGGING_FS_LOGFILE", "/opt/invenio/src/logs/invenio.log")
).parent
RECORD_IMPORTER_COMMUNITIES = {
    "neh": {
        "email_subject_register": "Your NEH Open Access Deposit is Ready",
        "email_template_register": "welcome_neh",
    }
}

# Invenio-Previewer
# =================

PREVIEWER_MAX_FILE_SIZE_BYTES = 1 * 1024 * 1024
"""Maximum file size in bytes for JSON/XML/CSV files."""

PREVIEWER_MAX_IMAGE_SIZE_BYTES = 0.5 * 1024 * 1024
"""Maximum file size in bytes for image files."""

PREVIEWER_TXT_MAX_BYTES = 1 * 1024 * 1024
"""Maximum number of .txt file bytes to preview before truncated."""

PREVIEWER_ZIP_MAX_FILES = 1000
"""Max number of files showed in the ZIP previewer."""


PREVIEWER_PREVIEWERS_ORDER = [
    "invenio_previewer.extensions.csv_papaparsejs",
    "invenio_previewer.extensions.custom_pdf_viewer",
    "invenio_previewer.extensions.iiif_simple",
    "invenio_previewer.extensions.simple_image",
    "invenio_previewer.extensions.json_prismjs",
    "invenio_previewer.extensions.xml_prismjs",
    "invenio_previewer.extensions.mistune",
    # 'invenio_previewer.extensions.pdfjs',
    "invenio_previewer.extensions.video_videojs",
    "invenio_previewer.extensions.audio_videojs",
    "invenio_previewer.extensions.ipynb",
    "invenio_previewer.extensions.zip",
    "invenio_previewer.extensions.txt_previewer",
    "invenio_previewer.extensions.custom_docx_viewer",
    "invenio_previewer.extensions.custom_pptx_viewer",
    "invenio_previewer.extensions.custom_latex_viewer",
    "invenio_previewer.extensions.custom_default_viewer",
    "invenio_previewer.extensions.default",
]

PREVIEWER_PREFERENCE = [
    "csv_papaparsejs",
    "custom_pdf_viewer",
    "iiif_simple",
    "simple_image",
    "json_prismjs",
    "xml_prismjs",
    "mistune",
    # "pdfjs",
    "video_videojs",
    "audio_videojs",
    "ipynb",
    "zip",
    "txt",
    "custom_docx_viewer",
    "custom_pptx_viewer",
    "custom_latex_viewer",
    "custom_default_viewer",
]
"""Preferred previewers."""

# Translations

# FIXME: configure this
# [compile_catalog]
# directory = "kcworks/translations/"
# use-fuzzy = True

# USER DASHBOARD
# ==============

APP_RDM_USER_DASHBOARD_ROUTES = {
    "uploads": "/me/uploads",
    "communities": "/me/collections",
    "requests": "/me/requests",
}


# COMMUNITIES
# ===========

COMMUNITIES_ADMINISTRATION_DISABLED = False
# TODO: COMMUNITIES_GROUPS_ENABLED is deprecated???
COMMUNITIES_GROUPS_ENABLED = True
USERS_RESOURCES_GROUPS_ENABLED = True

COMMUNITIES_ROUTES = {
    "frontpage": "/collections",
    "search": "/collections/search",
    "new": "/collections/new",
    "upload": "/collections/<pid_value>/upload",
    "settings": "/collections/<pid_value>/settings",
    "requests": "/collections/<pid_value>/requests",
    "settings_privileges": "/collections/<pid_value>/settings/privileges",
    "settings_curation_policy": "/collections/<pid_value>/settings/" "curation-policy",
    "settings_pages": "/collections/<pid_value>/settings/pages",
    "members": "/collections/<pid_value>/members",
    "invitations": "/collections/<pid_value>/invitations",
    "about": "/collections/<pid_value>/about",
    "curation_policy": "/collections/<pid_value>/curation-policy",
    "self": "/collections/<pid_value>",
}
COMMUNITIES_SELF_LINK = "https://works.hcommons.org/collections/{slug}"
COMMUNITIES_SETTINGS_LINK = "https://works.hcommons.org/collections/{slug}/settings"

RDM_REQUESTS_ROUTES = {
    "user-dashboard-request-details": "/me/requests/<request_pid_value>",
    "community-dashboard-request-details": (
        "/collections/<pid_value>/requests" "/<request_pid_value>"
    ),
    "community-dashboard-invitation-details": (
        "/collections/<pid_value>" "/invitations/<request_pid_value>"
    ),
}

RDM_COMMUNITIES_ROUTES = {
    "community-detail": "/collections/<pid_value>/records",
    "community-home": "/collections/<pid_value>/",
    "community-static-page": "/collections/<pid_value>/pages/<path:page_slug>",
}

# FIXME: provide proper namespace url
COMMUNITIES_NAMESPACES = {"kcr": f"{SITE_UI_URL}/terms/"}

COMMUNITIES_CUSTOM_FIELDS = [
    TextCF(name="kcr:commons_instance"),
    TextCF(name="kcr:commons_group_id"),
    TextCF(name="kcr:commons_group_name"),
    TextCF(name="kcr:commons_group_description"),
    TextCF(name="kcr:commons_group_visibility"),
    TextCF(name="kcr:commons_search_recid"),
    TextCF(name="kcr:commons_search_updated"),
]

COMMUNITIES_CUSTOM_FIELDS_UI = [
    {
        "section": "Linked Commons Group",
        "hidden": False,
        "description": "Information about a Commons group that owns the collection",
        "fields": [
            {
                "field": "kcr:commons_group_name",
                "ui_widget": "Input",
                "props": {
                    "label": "Commons Group Name",
                    "placeholder": "",
                    "icon": "",
                    # "description": ("Name of the Commons group."),
                    "disabled": True,
                },
            },
            {
                "field": "kcr:commons_group_description",
                "ui_widget": "Input",
                "props": {
                    "label": "Commons Group Description",
                    "placeholder": "",
                    "icon": "",
                    # "description": ("Description of the Commons group."),
                    "disabled": True,
                },
            },
            {
                "field": "kcr:commons_group_id",
                "ui_widget": "Input",
                "props": {
                    "label": "Commons Group ID",
                    "placeholder": "",
                    "icon": "",
                    "disabled": True,
                },
            },
            {
                "field": "kcr:commons_instance",
                "ui_widget": "Input",
                "props": {
                    "label": "Commons Instance",
                    "placeholder": "",
                    "icon": "",
                    # "description": (
                    #     "The Commons to which the group belongs (e.g., "
                    #     "STEMEd+ Commons, MLA Commons, Humanities Commons)"
                    # ),
                    "disabled": True,
                },
            },
            {
                "field": "kcr:commons_group_visibility",
                "ui_widget": "Input",
                "props": {
                    "label": "Commons Group Visibility",
                    "placeholder": "",
                    "icon": "",
                    # "description": ("Visibility of the Commons group."),
                    "disabled": True,
                },
            },
        ],
    }
]

COMMUNITIES_ROLES = [
    dict(
        name="reader",
        title=_("Reader"),
        description=_("Can view restricted records."),
        can_view=True,
    ),
    dict(
        name="curator",
        title=_("Curator"),
        description=_("Can curate records and view restricted records."),
        can_curate=True,
        can_view=True,
    ),
    dict(
        name="manager",
        title=_("Manager"),
        description=_(
            "Can manage members, curate records " "and view restricted records."
        ),
        can_manage_roles=["manager", "curator", "reader"],
        can_manage=True,
        can_curate=True,
        can_view=True,
    ),
    dict(
        name="owner",
        title=_("Owner"),
        description=_("Full administrative access to the entire community."),
        can_manage_roles=[
            "owner",
            "administrator",
            "manager",
            "curator",
            "reader",
        ],
        can_manage=True,
        can_curate=True,
        can_view=True,
        is_owner=True,
    ),
]
"""Community roles."""

# Group Collections (groups module)
# =================================

GROUP_COLLECTIONS_METADATA_ENDPOINTS = {
    "knowledgeCommons": {
        "url": (
            f"{COMMONS_API_REQUEST_PROTOCOL}://{KC_WORDPRESS_DOMAIN}/"
            "wp-json/commons/v1/groups/{id}"
        ),
        "token_name": "COMMONS_API_TOKEN",
        "placeholder_avatar": "mystery-group.png",
    },
}

# MODULAR DEPOSIT FORM
# ====================

INVENIO_MODULAR_DEPOSIT_FORM_COMMON_FIELDS = [
    {
        "section": "top",
        "component": "FormPages",
        "subsections": [
            {
                "section": "page-1",
                "label": "Type & Title",
                "component": "FormPage",
                "subsections": [
                    {
                        "section": "resource_type",
                        "label": "Resource Type",
                        "component": "ResourceTypeComponent",
                        "wrapped": True,
                        "required": True,
                    },
                    {
                        "section": "doi",
                        "label": "Digital Object Identifier",
                        "icon": "linkify",
                        "component": "DoiComponent",
                        "wrapped": True,
                    },
                    {
                        "section": "combined_titles",
                        "label": "Title",
                        "component": "TitleComponent",
                        "wrapped": True,
                        "icon": "book",
                    },
                    {
                        "section": "combined_dates",
                        "label": "Dates",
                        "component": "CombinedDatesComponent",
                        "wrapped": True,
                        "helpText": "",
                    },
                    {
                        "section": "abstract",
                        "label": "Abstract or Description",
                        "component": "AbstractComponent",
                        "wrapped": True,
                    },
                ],
            },
            {
                "section": "page-2",
                "label": "Details",
                "subsections": [
                    {
                        "section": "publisher",
                        "label": "Publisher",
                        "component": "PublisherComponent",
                        "wrapped": True,
                        "description": "",
                    },
                    {
                        "section": "language",
                        "label": "Languages",
                        "component": "LanguagesComponent",
                        "placeholder": "e.g., English, French, Swahili",
                        "description": (
                            "Search for the language(s) of the resource (e.g.,"
                            ' "en", "fre", "Swahili"). Press enter to '
                            "select each language."
                        ),
                        "wrapped": True,
                    },
                    {
                        "section": "alternate_identifiers",
                        "label": "URL and Other Identifiers",
                        "icon": "linkify",
                        "component": "AlternateIdentifiersComponent",
                        "wrapped": True,
                    },
                ],
            },
            {
                "section": "page-3",
                "label": "Contributors & Funding",
                "subsections": [
                    {
                        "section": "creators",
                        "label": "Creators and Contributors",
                        "component": "CreatorsComponent",
                        "wrapped": True,
                        "addButtonLabel": "Add Contributor",
                        "modal": {
                            "addLabel": _("Add Contributor"),
                            "editLabel": _("Edit Contributor"),
                        },
                    },
                    {
                        "section": "ai",
                        "label": "AI Use",
                        "component": "AIComponent",
                        "icon": "microchip",
                        "wrapped": True,
                        "description": (
                            "Briefly describe how generative artificial "
                            "intelligence tools (e.g., ChatGPT, MS Copilot, "
                            "Adobe Firefly, Midjourney, etc.) were used in "
                            "the production of this work."
                        ),
                        "helpText": (
                            "This text will be displayed on the detail page "
                            "for the work."
                        ),
                    },
                    # {
                    #     "section": "funding",
                    #     "label": "Funding",
                    #     "component": "FundingComponent",
                    #     "wrapped": True,
                    # },
                ],
            },
            {
                "section": "page-4",
                "label": "Make It Findable",
                "subsections": [
                    {
                        "section": "subjects",
                        "label": "Subjects",
                        "component": "SubjectsComponent",
                        "description": (
                            "Search for subject headings using full words."
                            "Press enter to select."
                        ),
                        "helpText": (
                            "These formal subject headings let people find "
                            "your work in subject searches."
                        ),
                        "placeholder": "e.g., Nelson Mandela, Genetics," "Shakespeare",
                        "wrapped": True,
                    },
                    {
                        "section": "keywords",
                        "label": "User-defined Keywords",
                        "icon": "tags",
                        "component": "KeywordsComponent",
                        "description": (
                            "Add keywords of your own to aid in searches."
                            "Press enter to add each keyword."
                        ),
                        "wrapped": True,
                    },
                    {
                        "section": "content_warning",
                        "label": "Content Warning",
                        "component": "ContentWarningComponent",
                        "description": (
                            "Please provide a brief warning about any "
                            "content that some may find upsetting."
                            " (E.g., 'Includes nudity.')"
                        ),
                        "helpText": (
                            "This text will be displayed on the detail page "
                            "for the work."
                        ),
                        "wrapped": True,
                    },
                    {
                        "section": "related_works",
                        "label": "Related Works",
                        "component": "RelatedWorksComponent",
                        "wrapped": True,
                    },
                ],
            },
            {
                "section": "page-5",
                "label": "Collections & Access",
                "subsections": [
                    {
                        "section": "communities",
                        "label": "Collection submission",
                        "component": "CommunitiesComponent",
                        "wrapped": True,
                    },
                    {
                        "section": "access",
                        "label": "Access",
                        "component": "AccessRightsComponent",
                        "wrapped": True,
                    },
                    # {
                    #     "section": "admin_metadata",
                    #     "label": "Administrative Metadata",
                    #     "component": "AdminMetadataComponent",
                    #     "props": {"restrict_to": ["administrator"]},
                    #     "wrapped": True,
                    # },
                    # {
                    #     "section": "hclegacy_info",
                    #     "label": "Commons Legacy Metadata",
                    #     "component": "CommonsLegacyInfoComponent",
                    #     "props": {"restrict_to": ["administrator"]},
                    #     "wrapped": True,
                    # },
                ],
            },
            {
                "section": "page-6",
                "label": "Files",
                "subsections": [
                    {
                        "section": "file_upload",
                        "label": "Upload Files",
                        "component": "FilesUploadComponent",
                        "wrapped": True,
                    },
                    # {
                    #     "section": "metadata_only",
                    #     "label": "Metadata Only",
                    #     "component": "MetadataOnlyComponent",
                    # },
                    {
                        "section": "licenses",
                        "label": "Licenses",
                        "component": "LicensesComponent",
                        "wrapped": True,
                    },
                ],
            },
            {
                "section": "page-7",
                "label": "Save & Publish",
                "subsections": [
                    {
                        "section": "submit_actions",
                        "label": "Publish",
                        "component": "SubmissionComponent",
                        "wrapped": False,
                    },
                ],
            },
        ],
    }
]

INVENIO_MODULAR_DEPOSIT_FORM_FIELDS_BY_TYPE = {
    "audiovisual": {
        "page-2": [
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Media Details",
                "icon": "video",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "media",
                                "component": "MediaComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                            },
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Media URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution",
                                "component": "SponsoringInstitutionComponent",
                            },
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "audiovisual-audioRecording": {
        "page-2": [
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Recording Details",
                "icon": "headphones",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "media",
                                "component": "MediaComponent",
                                "label": "Media, instruments, etc.",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                                "label": "Duration, file size, etc.",
                            },
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Recording location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Recording URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution",
                                "component": "SponsoringInstitutionComponent",
                            },
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "audiovisual-documentary": {
        "page-2": [
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Documentary Details",
                "icon": "video",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "media",
                                "component": "MediaComponent",
                                "label": "Media, technologies used, etc.",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                                "label": "Duration, file size, etc.",
                            },
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Production location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Documentary URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution",
                                "component": "SponsoringInstitutionComponent",
                            },
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "audiovisual-interviewRecording": {
        "page-2": [
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Recording Details",
                "icon": "microphone",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                                "label": "Duration, file size, etc.",
                            },
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Interview location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "media",
                                "component": "MediaComponent",
                                "label": "Equipment used, etc.",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Recording URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution",
                                "component": "SponsoringInstitutionComponent",
                            },
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "audiovisual-musicalRecording": {
        "page-2": [{"same_as": "audiovisual-audioRecording"}],
    },
    "audiovisual-other": {
        "page-2": [{"same_as": "audiovisual"}],
    },
    "audiovisual-performance": {
        "page-2": [
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Performance Details",
                "icon": "video",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                                "label": "Duration, file size, etc.",
                            },
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Performance location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "media",
                                "component": "MediaComponent",
                                "label": "Media, instruments, etc.",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Performance URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                                "label": "Project or series title",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                                "label": "Project or series URL",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution",
                                "component": "SponsoringInstitutionComponent",
                            },
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "audiovisual-podcastEpisode": {
        "page-2": [
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Eposide Details",
                "icon": "microphone",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                                "label": "Duration, file size, etc.",
                            },
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Recording location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "URL and Other Identifiers for Episode",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Podcast Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                                "label": "Main podcast title",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                                "label": "Main podcast URL",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution",
                                "component": "SponsoringInstitutionComponent",
                            },
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "audiovisual-videoRecording": {
        "page-2": [
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Recording Details",
                "icon": "video",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "media",
                                "component": "MediaComponent",
                                "label": "Media, technologies used, etc.",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                                "label": "Duration, file size, etc.",
                            },
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Production location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Recording URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution",
                                "component": "SponsoringInstitutionComponent",
                                "label": "Production company/institution",
                            },
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                                "label": "Production company/publisher",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "dataset": {
        "page-2": [
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Dataset Details",
                "icon": "table",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "media",
                                "component": "MediaComponent",
                                "label": "Data formats, etc.",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                                "label": "Record count, file size, etc.",
                            }
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Dataset URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                                "label": "Project URL",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution",
                                "component": "SponsoringInstitutionComponent",
                            },
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Project location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "image": {
        "page-2": [
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Image Details",
                "icon": "picture",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "media",
                                "component": "MediaComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                            },
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Image URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution",
                                "component": "SponsoringInstitutionComponent",
                            },
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "image-chart": {"page-2": [{"same_as": "image"}]},
    "image-diagram": {"page-2": [{"same_as": "image"}]},
    "image-figure": {"page-2": [{"same_as": "image"}]},
    "image-map": {"page-2": [{"same_as": "image"}]},
    "image-visualArt": {"page-2": [{"same_as": "image"}]},
    "image-photograph": {"page-2": [{"same_as": "image"}]},
    "image-other": {"page-2": [{"same_as": "image"}]},
    "instructionalResource": {
        "page-2": [
            {
                "section": "instructional_resource_details",
                "component": "SectionWrapper",
                "show_heading": True,
                "icon": "graduation",
                "label": "Resource Details",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "course_title",
                                "component": "CourseTitleComponent",
                                "classnames": "sixteen wide",
                            },
                            {
                                "section": "course_url",
                                "label": "Course URL",
                                "component": "PublicationURLComponent",
                                "classnames": "sixteen wide",
                            },
                        ],
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution",
                                "label": "Institution",
                                "component": "SponsoringInstitutionComponent",
                            },
                            {
                                "section": "department",
                                "label": "Department or Discipline",
                                "component": "DisciplineComponent",
                                "icon": "folder",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                            },
                            {
                                "section": "location",
                                "component": "PublicationLocationComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
            {
                "section": "alternate_identifiers",
                "label": "URLs and Alternate Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
        ]
    },
    "instructionalResource-curriculum": {
        "page-2": [{"same_as": "instructionalResource"}]
    },
    "instructionalResource-lessonPlan": {
        "page-2": [{"same_as": "instructionalResource"}]
    },
    "instructionalResource-other": {"page-2": [{"same_as": "instructionalResource"}]},
    "instructionalResource-syllabus": {
        "page-2": [{"same_as": "instructionalResource"}]
    },
    "presentation": {
        "page-2": [
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Presentation Details",
                "icon": "group",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "session",
                                "component": "MeetingSessionComponent",
                                "label": "Session",
                            },
                            {
                                "section": "session_part",
                                "component": "MeetingSessionPartComponent",
                                "label": "Session part",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                                "label": "Duration",
                                "placeholder": "e.g., 30 minutes (press enter to add)",
                            },
                            {
                                "section": "media",
                                "component": "MediaComponent",
                                "label": "Media or materials used",
                                "placeholder": (
                                    "e.g., PowerPoint, handouts (press enter" " to add)"
                                ),
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Presentation URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "event_details",
                "component": "SectionWrapper",
                "label": "Event Details",
                "icon": "calendar",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "event_title",
                                "component": "MeetingTitleComponent",
                                "label": "Event title",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "event_acronym",
                                "component": "MeetingAcronymComponent",
                                "label": "Event acronym",
                                "icon": "font",
                            },
                            {
                                "section": "event_dates",
                                "component": "MeetingDatesComponent",
                                "label": "Event dates",
                                "icon": "calendar",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "event_organization",
                                "component": "MeetingOrganizationComponent",
                                "label": "Organization",
                            },
                            {
                                "section": "sponsoring_institution",
                                "component": "SponsoringInstitutionComponent",
                                "label": "Sponsoring institution",
                                "icon": "building outline",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "event_url",
                                "component": "MeetingURLComponent",
                                "label": "Event URL",
                            },
                            {
                                "section": "event_place",
                                "component": "MeetingPlaceComponent",
                                "label": "Event location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "presentation-conferencePaper": {"page-2": [{"same_as": "presentation"}]},
    "presentation-conferencePoster": {"page-2": [{"same_as": "presentation"}]},
    "presentation-presentationText": {"page-2": [{"same_as": "presentation"}]},
    "presentation-slides": {"page-2": [{"same_as": "presentation"}]},
    "presentation-other": {"page-2": [{"same_as": "presentation"}]},
    "software": {
        "page-2": [
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Software Details",
                "icon": "group",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "code_repository",
                                "component": "CodeRepositoryComponent",
                                "icon": "github",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "version",
                                "component": "VersionComponent",
                                "icon": "copy",
                                "description": "",
                            },
                            {
                                "section": "development_status",
                                "component": "CodeDevelopmentStatusComponent",
                                "icon": "heartbeat",
                                "placeholder": "",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                                "label": "Size",
                                "placeholder": "e.g., 400 MB",
                                "icon": "database",
                            },
                            {
                                "section": "operating_system",
                                "component": "CodeOperatingSystemComponent",
                                "label": "Operating systems",
                                "placeholder": "e.g., Linux, Mac OS 14+, Android 7+",
                                "icon": "laptop",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "runtime_platform",
                                "component": "CodeRuntimePlatformComponent",
                                "icon": "cogs",
                                "label": "Runtimes or frameworks",
                                "placeholder": "e.g., .Net 3.0, Flask, Node.js",
                            },
                            {
                                "section": "programming_language",
                                "component": "CodeProgrammingLanguageComponent",
                                "icon": "code",
                                "label": "Programming languages",
                                "placeholder": "e.g., Python, JavaScript, R",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Package URL and other identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                                "label": "Project URL",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution",
                                "component": "SponsoringInstitutionComponent",
                            },
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Natural (Human) Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "software-3DModel": {"page-2": [{"same_as": "software"}]},
    "software-application": {"page-2": [{"same_as": "software"}]},
    "software-computationalModel": {"page-2": [{"same_as": "software"}]},
    "software-computationalNotebook": {"page-2": [{"same_as": "software"}]},
    "software-service": {"page-2": [{"same_as": "software"}]},
    "software-other": {"page-2": [{"same_as": "software"}]},
    "textDocument": None,
    "textDocument-abstract": {
        "page-2": [
            {
                "same_as": "textDocument-journalArticle",
            }
        ]
    },
    "textDocument-bibliography": None,
    "textDocument-blogPost": {
        "page-2": [
            {
                "section": "alternate_identifiers",
                "label": "Post URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
                "icon": "linkify",
            },
            {
                "section": "section_details",
                "component": "SectionWrapper",
                "label": "Post Details",
                "icon": "file",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                                "label": "Post length, file size, etc.",
                                "placeholder": "e.g., 400 words (press 'enter' to add)",
                            },
                            {
                                "section": "version",
                                "component": "VersionComponent",
                                "label": "Version",
                                "icon": "copy",
                            },
                        ],
                        "classnames": "equal width",
                    }
                ],
            },
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Blog Details",
                "icon": "world",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "blog_title",
                                "component": "JournalTitleComponent",
                                "label": "Blog title",
                            },
                            {
                                "section": "blog_url",
                                "component": "PublicationURLComponent",
                                "label": "Blog URL",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "blog_publisher",
                                "component": "PublisherComponent",
                                "label": "Blog publisher",
                            },
                            {
                                "section": "blog_publisher_location",
                                "component": "PublicationLocationComponent",
                                "label": "Blog publisher location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ]
    },
    "textDocument-book": {
        "page-2": [
            {
                "section": "publication_details",
                "component": "SectionWrapper",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "isbn",
                                "component": "ISBNComponent",
                                "classnames": "eight wide",
                            },
                            {
                                "section": "edition",
                                "component": "EditionComponent",
                                "classnames": "eight wide",
                            },
                        ],
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                                "classnames": "eight wide",
                            },
                            {
                                "section": "location",
                                "component": "PublicationLocationComponent",
                                "classnames": "eight wide",
                            },
                        ],
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "book_volumes",
                                "component": "VolumeComponent",
                                "classnames": "eight wide",
                            },
                            {
                                "section": "book_pages",
                                "component": "TotalPagesComponent",
                                "classnames": "eight wide",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "section": "series",
                        "component": "SeriesComponent",
                    },
                ],
                "show_heading": True,
                "icon": "file",
                "label": "Publication Details",
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
            {
                "section": "alternate_identifiers",
                "label": "URLs and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
        ]
    },
    "textDocument-bookSection": {"page-2": [{"same_as": "textDocument-essay"}]},
    "textDocument-conferenceProceeding": {
        "page-2": [
            {
                "section": "event_details",
                "component": "SectionWrapper",
                "label": "Event Details",
                "icon": "calendar",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "event_title",
                                "component": "MeetingTitleComponent",
                                "label": "Event title",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "event_acronym",
                                "component": "MeetingAcronymComponent",
                                "label": "Event acronym",
                                "icon": "font",
                            },
                            {
                                "section": "event_dates",
                                "component": "MeetingDatesComponent",
                                "label": "Event dates",
                                "icon": "calendar",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "event_organization",
                                "component": "MeetingOrganizationComponent",
                                "label": "Organization",
                            },
                            {
                                "section": "sponsoring_institution",
                                "component": "SponsoringInstitutionComponent",
                                "label": "Sponsoring institution",
                                "icon": "building outline",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "event_url",
                                "component": "MeetingURLComponent",
                                "label": "Event URL",
                            },
                            {
                                "section": "event_place",
                                "component": "MeetingPlaceComponent",
                                "label": "Event location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "publication_details",
                "component": "SectionWrapper",
                "show_heading": True,
                "icon": "book",
                "label": "Publication Details",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "isbn",
                                "component": "ISBNComponent",
                                "classnames": "eight wide",
                            },
                            {
                                "section": "edition",
                                "component": "EditionComponent",
                                "classnames": "eight wide",
                            },
                        ],
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                                "classnames": "eight wide",
                            },
                            {
                                "section": "location",
                                "component": "PublicationLocationComponent",
                                "classnames": "eight wide",
                            },
                        ],
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "book_volumes",
                                "component": "VolumeComponent",
                                "classnames": "eight wide",
                            },
                            {
                                "section": "book_pages",
                                "component": "TotalPagesComponent",
                                "classnames": "eight wide",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "section": "series",
                        "component": "SeriesComponent",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Proceedings URLs and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ]
    },
    "textDocument-dataManagementPlan": {"page-2": [{"same_as": "textDocument-report"}]},
    "textDocument-documentation": {"page-2": [{"same_as": "textDocument-report"}]},
    "textDocument-editorial": {
        "page-2": [
            {
                "same_as": "textDocument-newspaperArticle",
            }
        ],
        "page-3": [
            {
                "same_as": "textDocument-newspaperArticle",
            }
        ],
    },
    "textDocument-essay": {
        "page-2": [
            {
                "section": "book_section_details",
                "component": "SectionWrapper",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "book_title",
                                "component": "BookTitleComponent",
                                "classnames": "sixteen wide",
                            },
                        ],
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "section_pages",
                                "component": "SectionPagesComponent",
                            },
                            {
                                "section": "book_pages",
                                "component": "TotalPagesComponent",
                            },
                            {
                                "section": "book_volumes",
                                "component": "VolumeComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                                "classnames": "eight wide",
                            },
                            {
                                "section": "location",
                                "component": "PublicationLocationComponent",
                                "classnames": "eight wide",
                            },
                        ],
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "isbn",
                                "component": "ISBNComponent",
                            },
                            {
                                "section": "edition",
                                "component": "EditionComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "section": "series",
                        "label": "Series",
                        "component": "SeriesComponent",
                    },
                ],
                "show_heading": True,
                "icon": "file",
                "label": "Publication Details",
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
            {
                "section": "alternate_identifiers",
                "label": "URLs and Alternate Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
        ]
    },
    "textDocument-interviewTranscript": {
        "page-2": [{"same_as": "textDocument-report"}]
    },
    "textDocument-journalArticle": {
        "page-2": [
            {
                "section": "journal_section_details",
                "component": "SectionWrapper",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "journal_title",
                                "component": "JournalTitleComponent",
                                "classnames": "sixteen wide",
                            },
                        ],
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "journal_volume",
                                "component": "JournalVolumeComponent",
                            },
                            {
                                "section": "journal_issue",
                                "component": "JournalIssueComponent",
                            },
                            {
                                "section": "section_pages",
                                "component": "SectionPagesComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "issn",
                                "component": "JournalISSNComponent",
                            },
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                            },
                            {
                                "section": "location",
                                "component": "PublicationLocationComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
                "show_heading": True,
                "icon": "book",
                "label": "Periodical Details",
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
            {
                "section": "alternate_identifiers",
                "label": "URLs and Alternate Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
        ]
    },
    "textDocument-legalComment": {
        "page-2": [{"same_as": "textDocument-journalArticle"}]
    },
    "textDocument-legalResponse": {
        "page-2": [{"same_as": "textDocument-journalArticle"}]
    },
    "textDocument-magazineArticle": {
        "page-2": [{"same_as": "textDocument-newspaperArticle"}],
        "page-3": [{"same_as": "textDocument-newspaperArticle"}],
    },
    "textDocument-monograph": {"page-2": [{"same_as": "textDocument-book"}]},
    "textDocument-newspaperArticle": {
        "page-2": [
            {
                "section": "journal_section_details",
                "component": "SectionWrapper",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "newspaper_title",
                                "component": "JournalTitleComponent",
                                "classnames": "ten wide",
                            },
                            {
                                "section": "edition",
                                "component": "EditionComponent",
                                "classnames": "six wide",
                            },
                        ],
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "newspaper_volume",
                                "component": "JournalVolumeComponent",
                            },
                            {
                                "section": "newspaper_issue",
                                "component": "JournalIssueComponent",
                            },
                            {
                                "section": "section_pages",
                                "component": "SectionPagesComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "issn",
                                "component": "JournalISSNComponent",
                            },
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                            },
                            {
                                "section": "location",
                                "component": "PublicationLocationComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
                "show_heading": True,
                "icon": "book",
                "label": "Periodical Details",
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
            {
                "section": "alternate_identifiers",
                "label": "URLs and Alternate Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
        ],
        "page-3": [
            {
                "section": "creators",
                "label": "Contributors",
                "component": "CreatorsComponent",
                "wrapped": True,
                "addButtonLabel": "Add Contributor",
                "modal": {
                    "addLabel": _("Add Contributor"),
                    "editLabel": _("Edit Contributor"),
                },
            },
            {
                "section": "ai",
                "label": "AI Use",
                "icon": "microchip",
                "component": "AIComponent",
                "wrapped": True,
            },
        ],
    },
    "textDocument-onlinePublication": {
        "page-2": [
            {
                "section": "alternate_identifiers",
                "label": "URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
                "icon": "linkify",
            },
            {
                "section": "section_details",
                "component": "SectionWrapper",
                "label": "Online Publication Details",
                "icon": "cloud",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "blog_title",
                                "component": "JournalTitleComponent",
                                "label": "Parent Site Title",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "version",
                                "component": "VersionComponent",
                                "label": "Version",
                                "icon": "copy",
                            },
                            {
                                "section": "blog_url",
                                "component": "PublicationURLComponent",
                                "label": "Parent Site URL",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "blog_publisher",
                                "component": "PublisherComponent",
                                "label": "Publisher",
                            },
                            {
                                "section": "blog_publisher_location",
                                "component": "PublicationLocationComponent",
                                "label": "Publisher location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ]
    },
    "textDocument-poeticWork": {"page-2": [{"same_as": "textDocument-essay"}]},
    "textDocument-preprint": {"page-2": [{"same_as": "textDocument-journalArticle"}]},
    "textDocument-report": {
        "page-2": [
            {
                "section": "publication_details",
                "component": "SectionWrapper",
                "show_heading": True,
                "icon": "file",
                "label": "Report Details",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sponsoring_institution",
                                "label": "Sponsoring institution",
                                "component": "SponsoringInstitutionComponent",
                            }
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "edition",
                                "component": "EditionComponent",
                            },
                            {
                                "section": "book_pages",
                                "component": "TotalPagesComponent",
                            },
                            {
                                "section": "book_volumes",
                                "component": "VolumeComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Report URLs and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                                "label": "Project URL",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Project or institution location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Language",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ]
    },
    "textDocument-review": {"page-2": [{"same_as": "textDocument-journalArticle"}]},
    "textDocument-technicalStandard": {"page-2": [{"same_as": "textDocument-report"}]},
    "textDocument-thesis": {
        "page-2": [
            {
                "section": "publication_details",
                "component": "SectionWrapper",
                "show_heading": True,
                "icon": "graduation",
                "label": "Thesis or Dissertation Details",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sponsoring_institution",
                                "label": "Institution",
                                "component": "SponsoringInstitutionComponent",
                            }
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution_department",
                                "component": "InstitutionDepartmentComponent",
                                "icon": "folder",
                            },
                            {
                                "section": "degree",
                                "component": "DegreeComponent",
                                "icon": "certificate",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "location",
                                "component": "PublicationLocationComponent",
                            },
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Language",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
            {
                "section": "alternate_identifiers",
                "label": "URLs and Alternate Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
        ]
    },
    "textDocument-whitePaper": {"page-2": [{"same_as": "textDocument-report"}]},
    "textDocument-workingPaper": {"page-2": [{"same_as": "textDocument-report"}]},
    "textDocument-other": {"page-2": [{"same_as": "textDocument-report"}]},
    "other": None,
    "other-catalog": {
        "page-2": [
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Catalog Details",
                "icon": "ordered list",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "media",
                                "component": "MediaComponent",
                                "label": "Catalogued materials or formats",
                                "placeholder": (
                                    "e.g., books, maps, etc. (press 'enter' to" " add)"
                                ),
                            },
                            {
                                "section": "version",
                                "component": "VersionComponent",
                                "label": "Version",
                                "icon": "code branch",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Catalog location",
                                "icon": "map marker alternate",
                            },
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                                "label": "Record counts",
                                "placeholder": "e.g., 1000 maps (press 'enter' to add)",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Catalog URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                                "label": "Project URL",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution",
                                "component": "SponsoringInstitutionComponent",
                            },
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Project or institution location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "other-collection": {
        "page-2": [
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Collection Details",
                "icon": "zip",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "media",
                                "component": "MediaComponent",
                                "label": "Materials included, formats, etc.",
                                "placeholder": (
                                    "e.g., books, maps, etc. (press 'enter' to" " add)"
                                ),
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "edition",
                                "component": "VersionComponent",
                                "label": "Version",
                            },
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                                "label": "Item counts",
                                "placeholder": (
                                    "e.g., 1000 books (press 'enter' to add)"
                                ),
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Collection URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                                "label": "Project URL",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution",
                                "component": "SponsoringInstitutionComponent",
                            },
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Collection location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "other-event": {
        "page-2": [
            {
                "section": "event_details",
                "component": "SectionWrapper",
                "label": "Event Details",
                "icon": "calendar",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "event_title",
                                "component": "MeetingTitleComponent",
                                "label": "Event title",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "event_acronym",
                                "component": "MeetingAcronymComponent",
                                "label": "Event acronym",
                                "icon": "font",
                            },
                            {
                                "section": "event_dates",
                                "component": "MeetingDatesComponent",
                                "label": "Event dates",
                                "icon": "calendar",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "event_organization",
                                "component": "MeetingOrganizationComponent",
                                "label": "Organization",
                            },
                            {
                                "section": "sponsoring_institution",
                                "component": "SponsoringInstitutionComponent",
                                "label": "Sponsoring institution",
                                "icon": "building outline",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "event_url",
                                "component": "MeetingURLComponent",
                                "label": "Event URL",
                            },
                            {
                                "section": "event_place",
                                "component": "MeetingPlaceComponent",
                                "label": "Event location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "other-interactiveResource": {
        "page-2": [
            {
                "section": "alternate_identifiers",
                "label": "Resource URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
                "icon": "linkify",
            },
            {
                "section": "section_details",
                "component": "SectionWrapper",
                "label": "Resource Details",
                "icon": "hand pointer",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "blog_title",
                                "component": "JournalTitleComponent",
                                "label": "Parent Site Title",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "version",
                                "component": "VersionComponent",
                                "label": "Version",
                                "icon": "copy",
                            },
                            {
                                "section": "blog_url",
                                "component": "PublicationURLComponent",
                                "label": "Parent Site URL",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "blog_publisher",
                                "component": "PublisherComponent",
                                "label": "Publisher",
                            },
                            {
                                "section": "blog_publisher_location",
                                "component": "PublicationLocationComponent",
                                "label": "Publisher location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                                "label": "Project URL",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Project or institution location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
        ]
    },
    "other-notes": {
        "page-2": [
            {
                "section": "publication_details",
                "component": "SectionWrapper",
                "show_heading": True,
                "icon": "file",
                "label": "Notes Details",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sponsoring_institution",
                                "label": "Sponsoring institution",
                                "component": "SponsoringInstitutionComponent",
                            }
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "edition",
                                "component": "EditionComponent",
                            },
                            {
                                "section": "book_pages",
                                "component": "TotalPagesComponent",
                            },
                            {
                                "section": "book_volumes",
                                "component": "VolumeComponent",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "URLs and Other Identifiers for Notes",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                                "label": "Project URL",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Project or institution location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Language",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ]
    },
    "other-patent": {
        "page-2": [
            {
                "section": "publication_details",
                "component": "SectionWrapper",
                "show_heading": True,
                "icon": "file",
                "label": "Patent Details",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "publisher",
                                "component": "PublisherComponent",
                                "label": "Issuing authority",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Region or country",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Patent URL and Alternate Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                                "label": "Project URL",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "sponsoring_institution",
                                "label": "Sponsoring institution",
                                "component": "SponsoringInstitutionComponent",
                            },
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Project or institution location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Language",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ]
    },
    "other-peerReview": None,
    "other-physicalObject": {
        "page-2": [
            {
                "section": "image_details",
                "component": "SectionWrapper",
                "label": "Object Details",
                "icon": "cube",
                "show_heading": True,
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "media",
                                "component": "MediaComponent",
                                "label": "Materials or media",
                                "placeholder": (
                                    "e.g., paper, glass (press 'enter' to add)"
                                ),
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "edition",
                                "component": "VersionComponent",
                                "label": "Version",
                            },
                            {
                                "section": "sizes",
                                "component": "SizesComponent",
                                "label": "Dimensions, weight, etc.",
                                "placeholder": (
                                    "e.g., 10 cm high (press 'enter' to add)"
                                ),
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "alternate_identifiers",
                "label": "Object URL and Other Identifiers",
                "component": "AlternateIdentifiersComponent",
                "wrapped": True,
            },
            {
                "section": "project_details",
                "component": "SectionWrapper",
                "label": "Project Details",
                "show_heading": True,
                "icon": "briefcase",
                "subsections": [
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "project_title",
                                "component": "ProjectTitleComponent",
                                "label": "Project or collection title",
                            },
                            {
                                "section": "project_url",
                                "component": "PublicationURLComponent",
                                "label": "Project URL",
                            },
                        ],
                        "classnames": "equal width",
                    },
                    {
                        "component": "FormRow",
                        "subsections": [
                            {
                                "section": "institution",
                                "component": "SponsoringInstitutionComponent",
                            },
                            {
                                "section": "publication_location",
                                "component": "PublicationLocationComponent",
                                "label": "Object or collection location",
                            },
                        ],
                        "classnames": "equal width",
                    },
                ],
            },
            {
                "section": "language",
                "label": "Languages",
                "component": "LanguagesComponent",
                "placeholder": "e.g., English, French, Swahili",
                "description": (
                    "Search for the language(s) of the resource (e.g.,"
                    ' "en", "fre", "Swahili"). Press enter to '
                    "select each language."
                ),
                "wrapped": True,
            },
        ],
    },
    "other-workflow": None,
}


INVENIO_MODULAR_DEPOSIT_FORM_ICON_MODIFICATIONS = {
    "audiovisual": {"metadata.title": "video"},
    "audiovisual-audioRecording": {"metadata.title": "headphones"},
    "audiovisual-documentary": {"metadata.title": "film"},
    "audiovisual-interviewRecording": {"metadata.title": "microphone"},
    "audiovisual-musicalRecording": {"metadata.title": "music"},
    "audiovisual-other": {"metadata.title": "video"},
    "audiovisual-performance": {"metadata.title": "ticket"},
    "audiovisual-podcastEpisode": {"metadata.title": "microphone"},
    "audiovisual-videoRecording": {"metadata.title": "video"},
    "dataset": {"metadata.title": "table"},
    "image": {"metadata.title": "picture"},
    "image-chart": {"metadata.title": "chart bar"},
    "image-diagram": {"metadata.title": "sitemap"},
    "image-figure": {"metadata.title": "picture"},
    "image-map": {"metadata.title": "map"},
    "image-visualArt": {"metadata.title": "paint brush"},
    "image-photograph": {"metadata.title": "camera"},
    "image-other": {"metadata.title": "picture"},
    "instructionalResource": {"metadata.title": "graduation"},
    "instructionalResource-curriculum": {"metadata.title": "graduation"},
    "instructionalResource-lessonPlan": {"metadata.title": "graduation"},
    "instructionalResource-other": {"metadata.title": "graduation"},
    "instructionalResource-syllabus": {"metadata.title": "graduation"},
    "presentation": {"metadata.title": "microphone"},
    "presentation-conferencePaper": {"metadata.title": "file"},
    "presentation-conferencePoster": {"metadata.title": "chart bar"},
    "presentation-presentationText": {"metadata.title": "file"},
    "presentation-slides": {"metadata.title": "chart bar"},
    "presentation-other": {"metadata.title": "microphone"},
    "software": {"metadata.title": "code"},
    "software-3DModel": {"metadata.title": "cube"},
    "software-application": {"metadata.title": "code"},
    "software-computationalModel": {"metadata.title": "chart line"},
    "software-computationalNotebook": {"metadata.title": "code"},
    "software-service": {"metadata.title": "sitemap"},
    "software-other": {"metadata.title": "code"},
    "textDocument": {"metadata.title": "file"},
    "textDocument-abstract": {"metadata.title": "file"},
    "textDocument-bibliography": {"metadata.title": "list"},
    "textDocument-blogPost": {"metadata.title": "world"},
    "textDocument-book": {"metadata.title": "book"},
    "textDocument-bookSection": {"metadata.title": "file"},
    "textDocument-conferenceProceeding": {"metadata.title": "book"},
    "textDocument-dataManagementPlan": {},
    "textDocument-documentation": {"metadata.title": "file"},
    "textDocument-editorial": {
        "metadata.title": "newspaper",
        "custom_fields.journal:journal.title": "newspaper",
    },
    "textDocument-essay": {"metadata.title": "file"},
    "textDocument-interviewTranscript": {"metadata.title": "microphone"},
    "textDocument-journalArticle": {
        "metadata.title": "file",
    },
    "textDocument-legalComment": {"metadata.title": "law"},
    "textDocument-legalResponse": {"metadata.title": "law"},
    "textDocument-magazineArticle": {
        "metadata.title": "file",
    },
    "textDocument-monograph": {"metadata.title": "book"},
    "textDocument-newspaperArticle": {
        "metadata.title": "newspaper",
        "custom_fields.journal:journal.title": "newspaper outline",
    },
    "textDocument-onlinePublication": {"metadata.title": "cloud"},
    "textDocument-poeticWork": {"metadata.title": "file"},
    "textDocument-preprint": {"metadata.title": "file"},
    "textDocument-report": {"metadata.title": "file"},
    "textDocument-review": {
        "metadata.title": "thumbs up",
    },
    "textDocument-technicalStandard": {"metadata.title": "cog"},
    "textDocument-thesis": {"metadata.title": "graduation cap"},
    "textDocument-whitePaper": {"metadata.title": "file"},
    "textDocument-workingPaper": {"metadata.title": "file"},
    "textDocument-other": {"metadata.title": "file"},
    "other": {"metadata.title": "file"},
    "other-catalog": {"metadata.title": "ordered list"},
    "other-collection": {"metadata.title": "zip"},
    "other-event": {"metadata.title": "calendar"},
    "other-interactiveResource": {"metadata.title": "hand pointer"},
    "other-notes": {"metadata.title": "pencil alternate"},
    "other-patent": {"metadata.title": "gavel"},
    "other-peerReview": {"metadata.title": "thumbs up"},
    "other-physicalObject": {"metadata.title": "cube"},
    "other-workflow": {"metadata.title": "sitemap"},
}

INVENIO_MODULAR_DEPOSIT_FORM_LABEL_MODIFICATIONS = {
    "audiovisual": {
        "metadata.title": "Work Title",
        "custom_fields.kcr:publication_url": "Project URL",
    },
    "audiovisual-audioRecording": {
        "metadata.title": "Recording Title",
        "custom_fields.kcr:publication_url": "Project URL",
    },
    "audiovisual-documentary": {
        "metadata.title": "Documentary Title",
        "custom_fields.kcr:publication_url": "Project URL",
    },
    "audiovisual-interviewRecording": {
        "metadata.title": "Interview Title",
        "custom_fields.kcr:publication_url": "Project URL",
    },
    "audiovisual-musicalRecording": {
        "metadata.title": "Recording Title",
        "custom_fields.kcr:publication_url": "Project URL",
    },
    "audiovisual-other": {
        "metadata.title": "Work Title",
        "custom_fields.kcr:publication_url": "Project URL",
    },
    "audiovisual-performance": {
        "metadata.title": "Performance Title",
        "custom_fields.kcr:publication_url": "Project URL",
    },
    "audiovisual-podcastEpisode": {
        "metadata.title": "Episode Title",
        "custom_fields.kcr:publication_url": "Podcast URL",
    },
    "audiovisual-videoRecording": {
        "metadata.title": "Recording Title",
        "custom_fields.kcr:publication_url": "Project URL",
    },
    "dataset": {
        "metadata.title": "Dataset Title",
        "custom_fields.kcr:publication_url": "Project URL",
    },
    "image": {
        "metadata.title": "Image Title",
        "custom_fields.imprint:imprint.place": "Location",
        "custom_fields.kcr:publication_url": "Project URL",
    },
    "image-chart": {
        "metadata.title": "Chart Title",
    },
    "image-diagram": {
        "metadata.title": "Diagram Title",
    },
    "image-figure": {"metadata.title": "Figure Title"},
    "image-map": {"metadata.title": "Map Title"},
    "image-visualArt": {
        "metadata.title": "Artwork Title",
        "custom_fields.imprint:imprint.place": "Location",
        "custom_fields.kcr:publication_url": "Project URL",
    },
    "image-photograph": {
        "metadata.title": "Photograph Title",
        "custom_fields.imprint:imprint.place": "Location",
        "custom_fields.kcr:publication_url": "Project URL",
    },
    "image-other": {
        "metadata.title": "Image Title",
        "custom_fields.kcr:publication_url": "Project URL",
    },
    "instructionalResource": {"metadata.title": "Resource Title"},
    "instructionalResource-curriculum": {"metadata.title": "Curriculum Title"},
    "instructionalResource-lessonPlan": {"metadata.title": "Lesson Plan Title"},
    "instructionalResource-other": {"metadata.title": "Resource Title"},
    "instructionalResource-syllabus": {"metadata.title": "Syllabus Title"},
    "presentation": {"metadata.title": "Presentation Title"},
    "presentation-conferencePaper": {"metadata.title": "Paper Title"},
    "presentation-conferencePoster": {"metadata.title": "Poster Title"},
    "presentation-presentationText": {"metadata.title": "Presentation Title"},
    "presentation-slides": {"metadata.title": "Presentation Title"},
    "presentation-other": {"metadata.title": "Presentation Title"},
    "software": {"metadata.title": "Software Name"},
    "software-3DModel": {
        "metadata.title": "Model Title",
        "metadata.identifiers": "Model URLs and Other Identifiers",
    },
    "software-application": {
        "metadata.title": "Application Name",
        "metadata.identifiers": "Application URLs and Other Identifiers",
    },
    "software-computationalModel": {
        "metadata.title": "Model Title",
        "metadata.identifiers": "Model URLs and Other Identifiers",
    },
    "software-computationalNotebook": {
        "metadata.title": "Notebook Name",
        "metadata.identifiers": "Notebook URLs and Other Identifiers",
    },
    "software-service": {
        "metadata.title": "Service Name",
        "metadata.identifiers": "Service URLs and Other Identifiers",
    },
    "software-other": {"metadata.title": "Software Name"},
    "textDocument": {"metadata.title": "Document Title"},
    "textDocument-abstract": {
        "metadata.title": "Abstract Title",
        "custom_fields.journal:journal.title": "Abstract Title",
    },
    "textDocument-bibliography": {"metadata.title": "Bibliography Title"},
    "textDocument-blogPost": {"metadata.title": "Post Title"},
    "textDocument-book": {"metadata.title": "Book Title"},
    "textDocument-bookSection": {"metadata.title": "Chapter/Section Title"},
    "textDocument-conferenceProceeding": {
        "metadata.title": "Proceedings Title",
        "metadata.identifiers": "Proceedings URL and Other Identifiers",
    },
    "textDocument-dataManagementPlan": {
        "metadata.title": "Plan Title",
        "metadata.identifiers": "Plan URLs and Other Identifiers",
    },
    "textDocument-documentation": {
        "metadata.title": "Documentation Title",
        "metadata.identifiers": "Documentation URLs and Other Identifiers",
    },
    "textDocument-editorial": {
        "metadata.title": "Editorial Title",
        "custom_fields.journal:journal.title": "Newspaper/periodical name",
        "custom_fields.journal:journal.pages": "Article pages",
        "custom_fields.kcr:edition": "Edition",
        "metadata.identifiers": "Editorial URLs and Other Identifiers",
    },
    "textDocument-essay": {
        "metadata.title": "Essay Title",
        "metadata.identifiers": "Essay URLs and Other Identifiers",
    },
    "textDocument-interviewTranscript": {
        "metadata.title": "Interview Title",
        "metadata.identifiers": "Interview URLs and Other Identifiers",
    },
    "textDocument-journalArticle": {
        "metadata.title": "Article Title",
        "custom_fields.journal:journal.pages": "Article pages",
    },
    "textDocument-legalComment": {
        "metadata.title": "Comment Title",
        "metadata.identifiers": "Comment URLs and Other Identifiers",
    },
    "textDocument-legalResponse": {
        "metadata.title": "Response Title",
        "metadata.identifiers": "Response URLs and Other Identifiers",
    },
    "textDocument-magazineArticle": {
        "metadata.title": "Article Title",
        "custom_fields.journal:journal.title": "Magazine/periodical title",
        "custom_fields.journal:journal.pages": "Article pages",
        "custom_fields.kcr:edition": "Edition",
    },
    "textDocument-monograph": {
        "metadata.title": "Monograph Title",
        "metadata.identifiers": "Monograph URLs and Other Identifiers",
    },
    "textDocument-newspaperArticle": {
        "metadata.title": "Article Title",
        "custom_fields.journal:journal.title": "Newspaper name",
        "custom_fields.journal:journal.pages": "Article pages",
        "custom_fields.kcr:edition": "Edition",
    },
    "textDocument-onlinePublication": {"metadata.title": "Publication Title"},
    "textDocument-poeticWork": {"metadata.title": "Poem Title"},
    "textDocument-preprint": {"metadata.title": "Preprint Title"},
    "textDocument-report": {
        "metadata.title": "Report Title",
        "custom_fields.imprint:imprint.pages": "Total report pages",
    },
    "textDocument-review": {
        "metadata.Title": "Review Title",
        "custom_fields.journal:journal.title": "Magazine/periodical title",
        "custom_fields.journal:journal.pages": "Review pages",
        "metadata.identifiers": "Review URLs and Other Identifiers",
    },
    "textDocument-technicalStandard": {
        "metadata.title": "Standard Title",
        "metadata.identifiers": "Standard URLs and Other Identifiers",
    },
    "textDocument-thesis": {"metadata.title": "Thesis/Dissertation Title"},
    "textDocument-whitePaper": {
        "metadata.title": "White Paper Title",
        "metadata.identifiers": "White Paper URLs and Other Identifiers",
    },
    "textDocument-workingPaper": {
        "metadata.title": "Working Paper Title",
        "metadata.identifiers": "Working Paper URLs and Other Identifiers",
    },
    "textDocument-other": {
        "metadata.title": "Document Title",
        "metadata.identifiers": "Document URLs and Other Identifiers",
    },
    "other": {"metadata.title": "Resource Title"},
    "other-catalog": {"metadata.title": "Catalog Title"},
    "other-collection": {"metadata.title": "Collection Title"},
    "other-event": {"metadata.title": "Event Title"},
    "other-interactiveResource": {"metadata.title": "Resource Title"},
    "other-notes": {
        "metadata.title": "Title of Notes",
        "custom_fields.imprint:imprint.pages": "Total pages",
        "custom_fields.kcr:volumes.volume": "Current volume",
    },
    "other-patent": {"metadata.title": "Patent Title"},
    "other-peerReview": {"metadata.title": "Review Title"},
    "other-physicalObject": {"metadata.title": "Object Title"},
    "other-workflow": {"metadata.title": "Workflow Title"},
}

INVENIO_MODULAR_DEPOSIT_FORM_PLACEHOLDER_MODIFICATIONS = {
    "image": {
        "metadata.sizes": _("e.g., 32 x 24 cm or 1.5 GB (press 'enter' to add)"),
    },
    "textDocument-editorial": {"custom_fields.kcr:edition": "e.g., evening"},
    "textDocument-newspaperArticle": {"custom_fields.kcr:edition": "e.g., evening"},
}

INVENIO_MODULAR_DEPOSIT_FORM_PRIORITY_FIELD_VALUES = {}

INVENIO_MODULAR_DEPOSIT_FORM_EXTRA_REQUIRED_FIELDS = {
    "textDocument-journalArticle": ["custom_fields.journal:journal.title"]
}

INVENIO_MODULAR_DEPOSIT_FORM_PIDS_OVERRIDES = {
    "doi": {
        "field_label": "Digital Object Identifier",
        "pid_placeholder": _("Copy/paste your existing DOI here..."),
        "btn_label_discard_pid": _("Discard the reserved DOI."),
        "btn_label_get_pid": _("Get a DOI now!"),
        "managed_help_text": _(
            "Reserve a DOI by pressing the button "
            "(so it can be included in files prior to upload). "
            "The DOI is registered when your upload is published."
        ),
        "unmanaged_help_text": _(
            "Only enter a DOI if you have already registered one "
            "with a DOI provider. If you have not registered one "
            "we will register a DOI for you when your upload is published."
        ),
    }
}

#  STATS
# ======
# See https://invenio-stats.readthedocs.io/en/latest/configuration.html

# FIXME: restrict this permission to authorized users with the proper role
AllowAllPermission = type(
    "Allow",
    (),
    {"can": lambda self: True, "allows": lambda *args: True},
)()


def AllowAllPermissionFactory(obj_id, action):
    return AllowAllPermission


# Register stats templates as new-style index templates instead of
# using the old-style index templates.
STATS_REGISTER_INDEX_TEMPLATES = True

STATS_EVENTS = {
    "file-download": {
        "templates": "kcworks.services.search.index_templates.stats.file_download",
        # "templates": "invenio_rdm_records.records.stats.templates."
        # "events.file_download",
        "event_builders": [
            "invenio_rdm_records.resources.stats.file_download_event_builder",
            "invenio_rdm_records.resources.stats.check_if_via_api",
        ],
        "cls": EventsIndexer,
        "params": {
            "preprocessors": [
                flag_robots,
                anonymize_user,
                build_file_unique_id,
            ]
        },
    },
    "record-view": {
        "templates": "kcworks.services.search.index_templates.stats.record_view",
        # "templates": "invenio_rdm_records.records.stats.templates."
        # "events.record_view",
        "event_builders": [
            "invenio_rdm_records.resources.stats.record_view_event_builder",
            "invenio_rdm_records.resources.stats.check_if_via_api",
            "invenio_rdm_records.resources.stats.drop_if_via_api",
        ],
        "cls": EventsIndexer,
        "params": {
            "preprocessors": [
                flag_robots,
                anonymize_user,
                build_record_unique_id,
            ],
        },
    },
}

STATS_AGGREGATIONS = {
    "file-download-agg": {
        "templates": "kcworks.services.search.index_templates.stats.aggr_file_download",
        # "templates": "invenio_rdm_records.records.stats.templates."
        # "aggregations.aggr_file_download",
        "cls": StatAggregatorOverridable,
        "params": {
            "event": "file-download",
            "field": "unique_id",
            "interval": "day",
            "index_interval": "month",
            "copy_fields": {
                "file_id": "file_id",
                "file_key": "file_key",
                "bucket_id": "bucket_id",
                "recid": "recid",
                "parent_recid": "parent_recid",
            },
            "metric_fields": {
                "unique_count": (
                    "cardinality",
                    "unique_session_id",
                    {"precision_threshold": 1000},
                ),
                "volume": ("sum", "size", {}),
            },
        },
    },
    "record-view-agg": {
        "templates": "kcworks.services.search.index_templates.stats.aggr_record_view",
        # "templates": "invenio_rdm_records.records.stats.templates."
        # "aggregations.aggr_record_view",
        "cls": StatAggregatorOverridable,
        "params": {
            "event": "record-view",
            "field": "unique_id",
            "interval": "day",
            "index_interval": "month",
            "copy_fields": {
                "recid": "recid",
                "parent_recid": "parent_recid",
                "via_api": "via_api",
            },
            "metric_fields": {
                "unique_count": (
                    "cardinality",
                    "unique_session_id",
                    {"precision_threshold": 1000},
                ),
            },
            "query_modifiers": [lambda query, **_: query.filter("term", via_api=False)],
        },
    },
}

STATS_QUERIES = {
    "record-view": {
        "cls": TermsQuery,
        "permission_factory": AllowAllPermissionFactory,
        "params": {
            "index": "stats-record-view",
            "doc_type": "record-view-day-aggregation",
            "copy_fields": {
                "recid": "recid",
                "parent_recid": "parent_recid",
            },
            "query_modifiers": [],
            "required_filters": {
                "recid": "recid",
            },
            "metric_fields": {
                "views": ("sum", "count", {}),
                "unique_views": ("sum", "unique_count", {}),
            },
        },
    },
    "record-view-all-versions": {
        "cls": TermsQuery,
        "permission_factory": AllowAllPermissionFactory,
        "params": {
            "index": "stats-record-view",
            "doc_type": "record-view-day-aggregation",
            "copy_fields": {
                "parent_recid": "parent_recid",
            },
            "query_modifiers": [],
            "required_filters": {
                "parent_recid": "parent_recid",
            },
            "metric_fields": {
                "views": ("sum", "count", {}),
                "unique_views": ("sum", "unique_count", {}),
            },
        },
    },
    "record-download": {
        "cls": TermsQuery,
        "permission_factory": AllowAllPermissionFactory,
        "params": {
            "index": "stats-file-download",
            "doc_type": "file-download-day-aggregation",
            "copy_fields": {
                "recid": "recid",
                "parent_recid": "parent_recid",
            },
            "query_modifiers": [],
            "required_filters": {
                "recid": "recid",
            },
            "metric_fields": {
                "downloads": ("sum", "count", {}),
                "unique_downloads": ("sum", "unique_count", {}),
                "data_volume": ("sum", "volume", {}),
            },
        },
    },
    "record-download-all-versions": {
        "cls": TermsQuery,
        "permission_factory": AllowAllPermissionFactory,
        "params": {
            "index": "stats-file-download",
            "doc_type": "file-download-day-aggregation",
            "copy_fields": {
                "parent_recid": "parent_recid",
            },
            "query_modifiers": [],
            "required_filters": {
                "parent_recid": "parent_recid",
            },
            "metric_fields": {
                "downloads": ("sum", "count", {}),
                "unique_downloads": ("sum", "unique_count", {}),
                "data_volume": ("sum", "volume", {}),
            },
        },
    },
}

STATS_PERMISSION_FACTORY = permissions_policy_lookup_factory

REMOTE_USER_DATA_API_ENDPOINTS = {
    "knowledgeCommons": {
        "users": {
            "remote_endpoint": (
                f"{COMMONS_API_REQUEST_PROTOCOL}://{KC_WORDPRESS_DOMAIN}/"
                "wp-json/commons/v1/users/"
            ),
            "remote_identifier": "id",
            "remote_method": "GET",
            "token_env_variable_label": "COMMONS_API_TOKEN",
        },
        "groups": {
            "remote_endpoint": (
                f"{COMMONS_API_REQUEST_PROTOCOL}://{KC_WORDPRESS_DOMAIN}/"
                "wp-json/commons/v1/groups/"
            ),
            "remote_identifier": "id",
            "remote_method": "GET",
            "token_env_variable_label": "COMMONS_API_TOKEN",
            "group_roles": {
                "reader": "member",
                "curator": "editor",
                "administrator": "administrator",
            },
        },
        "entity_types": {
            "users": {"events": ["created", "updated", "deleted"]},
            "groups": {"events": ["created", "updated", "deleted"]},
        },
    }
}


# we are only indexing published records, not drafts
REMOTE_API_PROVISIONER_EVENTS = {
    "rdm_record": {
        KC_SEARCH_URL_DOCS: {
            "publish": {
                "http_method": choose_record_publish_method,
                "with_record_owner": True,
                "payload": format_commons_search_payload,
                "callback": record_commons_search_recid,
                "url_factory": record_publish_url_factory,
                "auth_token": os.getenv("COMMONS_SEARCH_API_TOKEN"),
                "timing_field": "kcr:commons_search_updated",
            },
            "delete_record": {
                "http_method": "DELETE",
                "with_record_owner": True,
                "url_factory": lambda identity, *args, **kwargs: (
                    f"{KC_SEARCH_URL_DOCS}/"
                    f"{kwargs['record']['custom_fields'].get('kcr:commons_search_recid', '')}"  # noqa: E501
                ),
                "auth_token": os.getenv("COMMONS_SEARCH_API_TOKEN"),
            },
            "delete": {
                "http_method": "DELETE",
                "with_record_owner": True,
                "url_factory": lambda identity, *args, **kwargs: (
                    f"{KC_SEARCH_URL_DOCS}/"
                    f"{kwargs['record']['custom_fields'].get('kcr:commons_search_recid', '')}"  # noqa: E501
                ),
                "auth_token": os.getenv("COMMONS_SEARCH_API_TOKEN"),
            },
            "restore_record": {
                "http_method": "POST",
                "with_record_owner": True,
                "payload": format_commons_search_payload,
                "callback": record_commons_search_recid,
                "url_factory": record_publish_url_factory,
                "auth_token": os.getenv("COMMONS_SEARCH_API_TOKEN"),
            },
        },
    },
    "community": {
        KC_SEARCH_URL_DOCS: {
            "create": {
                "http_method": "POST",
                "with_record_owner": False,
                "payload": format_commons_search_collection_payload,
                "callback": record_commons_search_collection_recid,
                "auth_token": os.getenv("COMMONS_SEARCH_API_TOKEN"),
            },
            "update": {
                "http_method": "PUT",
                "with_record_owner": False,
                "payload": format_commons_search_collection_payload,
                # FIXME: send POST if community hasn't been indexed yet
                "url_factory": lambda identity, **kwargs: (
                    f"{KC_SEARCH_URL_DOCS}/"
                    f"{kwargs['record']['custom_fields'].get('kcr:commons_search_recid', '')}"  # noqa: E501
                ),
                "callback": record_commons_search_collection_recid,
                "auth_token": os.getenv("COMMONS_SEARCH_API_TOKEN"),
                "timing_field": "kcr:commons_search_updated",
            },
            "delete": {  # delete_community method uses delete components
                "http_method": "DELETE",
                "url_factory": lambda identity, *args, **kwargs: (
                    f"{KC_SEARCH_URL_DOCS}/"
                    f"{kwargs['record']['custom_fields'].get('kcr:commons_search_recid', '')}"  # noqa: E501
                ),
                "callback": lambda *args, **kwargs: None,  # to expose testing output
                "auth_token": os.getenv("COMMONS_SEARCH_API_TOKEN"),
            },
            "restore": {  # restore_community method uses restore components
                "http_method": "POST",
                "with_record_owner": True,
                "payload": format_commons_search_collection_payload,
                "callback": record_commons_search_collection_recid,
                "auth_token": os.getenv("COMMONS_SEARCH_API_TOKEN"),
            },
        },
    },
}


# DEPRECATED
# These sub-schemas are deprecated for now because the profile
# search mapping only allows for keyword fields.
# class CustomAffiliationSchema(Schema):
#     """The default affiliations schema."""

#     name = fields.String()
#     id = fields.String()


# class CustomNamePartsSchema(Schema):
#     """The default name parts schema."""

#     first = fields.String()
#     middle = fields.String()
#     last = fields.String()
#     last_prefix_for_alphabetizing = fields.String()
#     last_prefix = fields.String()
#     patronymic = fields.String()
#     suffix = fields.String()


# class CustomUserIdentifierSchema(Schema):
#     """The default user identifier schema."""

#     identifier = fields.String()
#     scheme = fields.String()


class CustomUserProfileSchema(Schema):
    """The default user profile schema."""

    full_name = fields.String()
    affiliations = fields.String()
    name_parts = fields.String()
    name_parts_local = fields.String()
    identifier_email = fields.String()
    identifier_orcid = fields.String()
    identifier_kc_username = fields.String()
    identifier_other = fields.String()
    unread_notifications = fields.String()


ACCOUNTS_USER_PROFILE_SCHEMA = CustomUserProfileSchema()
